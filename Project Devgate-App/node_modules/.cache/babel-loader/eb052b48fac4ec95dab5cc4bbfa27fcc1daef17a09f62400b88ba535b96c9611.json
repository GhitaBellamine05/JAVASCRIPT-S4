{"ast":null,"code":"import _regeneratorRuntime from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { getAuth, EmailAuthProvider, reauthenticateWithCredential, updatePassword, updateEmail, sendEmailVerification, updateProfile as updateAuthProfile } from \"firebase/auth\";\nimport { getFirestore, doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\nimport { onMounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  name: \"ProfilePage\",\n  setup: function setup() {\n    var route = useRoute();\n    var router = useRouter();\n\n    // User data\n    var firstName = ref('');\n    var lastName = ref('');\n    var oldPass = ref('');\n    var newPass = ref('');\n    var newEmail = ref('');\n    var userId = ref('');\n    var successMessage = ref('');\n    var errorMessage = ref('');\n    var email = ref('');\n    var emailVerified = ref(false);\n    var isOnline = ref(false);\n    var profileImageUrl = ref('');\n    var isUploading = ref(false);\n    var uploadProgress = ref(0);\n    var profileImagePath = ref('');\n    var imageUrlInput = ref('');\n    var darkMode = ref(false);\n\n    // Social media links\n    var socialLinks = ref({\n      github: '',\n      linkedin: '',\n      instagram: '',\n      facebook: '',\n      discord: ''\n    });\n\n    // Toggle dark mode\n    var toggleDarkMode = function toggleDarkMode() {\n      darkMode.value = !darkMode.value;\n      if (darkMode.value) {\n        document.documentElement.classList.add('dark-theme');\n      } else {\n        document.documentElement.classList.remove('dark-theme');\n      }\n      localStorage.setItem('darkMode', darkMode.value);\n    };\n\n    // Get current user on component load\n    var getCurrentUser = function getCurrentUser() {\n      var auth = getAuth();\n      return auth.currentUser;\n    };\n\n    // Safely determine user ID from either auth or route params\n    var determineUserId = function determineUserId() {\n      var currentUser = getCurrentUser();\n      if (currentUser !== null && currentUser !== void 0 && currentUser.uid) {\n        return currentUser.uid;\n      }\n      if (route.params.userid) {\n        return route.params.userid;\n      }\n      return null;\n    };\n    var fetchUserData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var id, db, userDoc, userData, currentUser, _currentUser;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              console.log(\"Fetching user data...\");\n              id = determineUserId();\n              if (id) {\n                _context.next = 8;\n                break;\n              }\n              errorMessage.value = \"No user ID found. Please log in.\";\n              console.error(\"User ID not found\");\n              setTimeout(function () {\n                router.push('/dash');\n              }, 2000);\n              return _context.abrupt(\"return\");\n            case 8:\n              userId.value = id;\n              console.log(\"User ID:\", userId.value);\n              db = getFirestore();\n              _context.next = 13;\n              return getDoc(doc(db, \"users\", userId.value));\n            case 13:\n              userDoc = _context.sent;\n              if (!userDoc.exists()) {\n                _context.next = 32;\n                break;\n              }\n              userData = userDoc.data();\n              firstName.value = userData.firstName || '';\n              lastName.value = userData.lastName || '';\n              email.value = userData.email || '';\n              isOnline.value = userData.isOnline || false;\n              if (userData.profileImageUrl) {\n                profileImageUrl.value = userData.profileImageUrl;\n                profileImagePath.value = userData.profileImagePath || '';\n                console.log(\"Loaded profile image:\", profileImageUrl.value);\n              }\n              if (userData.socialLinks) {\n                socialLinks.value = _objectSpread(_objectSpread({}, socialLinks.value), userData.socialLinks);\n              }\n              currentUser = getCurrentUser();\n              if (!currentUser) {\n                _context.next = 29;\n                break;\n              }\n              emailVerified.value = currentUser.emailVerified || false;\n              if (!(!email.value && currentUser.email)) {\n                _context.next = 29;\n                break;\n              }\n              email.value = currentUser.email;\n              _context.next = 29;\n              return updateDoc(doc(db, 'users', userId.value), {\n                email: currentUser.email,\n                updatedAt: new Date()\n              });\n            case 29:\n              console.log(\"User data loaded successfully\");\n              _context.next = 45;\n              break;\n            case 32:\n              _currentUser = getCurrentUser();\n              if (!_currentUser) {\n                _context.next = 42;\n                break;\n              }\n              console.log(\"Creating new user document...\");\n              _context.next = 37;\n              return setDoc(doc(db, 'users', userId.value), {\n                firstName: '',\n                lastName: '',\n                email: _currentUser.email || '',\n                isOnline: true,\n                profileImageUrl: '',\n                profileImagePath: '',\n                socialLinks: {},\n                createdAt: new Date()\n              });\n            case 37:\n              email.value = _currentUser.email || '';\n              emailVerified.value = _currentUser.emailVerified || false;\n              console.log(\"New user document created\");\n              _context.next = 45;\n              break;\n            case 42:\n              console.error(\"No user found in Auth or Firestore\");\n              errorMessage.value = \"User not found. Please log in again.\";\n              setTimeout(function () {\n                router.push('/login');\n              }, 2000);\n            case 45:\n              _context.next = 51;\n              break;\n            case 47:\n              _context.prev = 47;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"Error fetching user data:\", _context.t0);\n              errorMessage.value = \"Failed to fetch user data: \" + _context.t0.message;\n            case 51:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 47]]);\n      }));\n      return function fetchUserData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var setImageFromUrl = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var id, imgPromise, currentUser, db;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (imageUrlInput.value) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              _context2.prev = 2;\n              successMessage.value = '';\n              errorMessage.value = '';\n              isUploading.value = true;\n              if (userId.value) {\n                _context2.next = 13;\n                break;\n              }\n              id = determineUserId();\n              if (id) {\n                _context2.next = 12;\n                break;\n              }\n              errorMessage.value = \"User ID not found. Please log in again.\";\n              isUploading.value = false;\n              return _context2.abrupt(\"return\");\n            case 12:\n              userId.value = id;\n            case 13:\n              _context2.prev = 13;\n              new URL(imageUrlInput.value);\n              _context2.next = 22;\n              break;\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](13);\n              errorMessage.value = \"Please enter a valid URL\";\n              isUploading.value = false;\n              return _context2.abrupt(\"return\");\n            case 22:\n              _context2.prev = 22;\n              imgPromise = new Promise(function (resolve, reject) {\n                var img = new Image();\n                img.onload = function () {\n                  return resolve(true);\n                };\n                img.onerror = function () {\n                  return reject(new Error(\"Could not load image from URL\"));\n                };\n                img.src = imageUrlInput.value;\n              });\n              _context2.next = 26;\n              return imgPromise;\n            case 26:\n              _context2.next = 33;\n              break;\n            case 28:\n              _context2.prev = 28;\n              _context2.t1 = _context2[\"catch\"](22);\n              errorMessage.value = \"Could not load image from this URL. Please check that it's a valid, accessible image URL.\";\n              isUploading.value = false;\n              return _context2.abrupt(\"return\");\n            case 33:\n              currentUser = getCurrentUser();\n              if (!currentUser) {\n                _context2.next = 44;\n                break;\n              }\n              _context2.prev = 35;\n              _context2.next = 38;\n              return updateAuthProfile(currentUser, {\n                photoURL: imageUrlInput.value\n              });\n            case 38:\n              console.log(\"Auth profile updated with URL\");\n              _context2.next = 44;\n              break;\n            case 41:\n              _context2.prev = 41;\n              _context2.t2 = _context2[\"catch\"](35);\n              console.error(\"Failed to update auth profile:\", _context2.t2);\n            case 44:\n              db = getFirestore();\n              _context2.next = 47;\n              return updateDoc(doc(db, 'users', userId.value), {\n                profileImageUrl: imageUrlInput.value,\n                profileImagePath: 'external_url',\n                updatedAt: new Date()\n              });\n            case 47:\n              profileImageUrl.value = imageUrlInput.value;\n              profileImagePath.value = 'external_url';\n              successMessage.value = \"Profile picture updated successfully!\";\n              imageUrlInput.value = '';\n              _context2.next = 57;\n              break;\n            case 53:\n              _context2.prev = 53;\n              _context2.t3 = _context2[\"catch\"](2);\n              console.error(\"Set image URL error:\", _context2.t3);\n              errorMessage.value = \"Failed to set profile picture: \" + _context2.t3.message;\n            case 57:\n              _context2.prev = 57;\n              isUploading.value = false;\n              return _context2.finish(57);\n            case 60:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[2, 53, 57, 60], [13, 17], [22, 28], [35, 41]]);\n      }));\n      return function setImageFromUrl() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var handleImageError = function handleImageError() {\n      if (profileImageUrl.value) {\n        errorMessage.value = \"Failed to load image. The URL may be invalid or inaccessible.\";\n        profileImageUrl.value = '/default-avatar.png';\n      }\n    };\n    var handleImageUpload = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event) {\n        var file, validTypes, maxSize, id, reader;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              file = event.target.files[0];\n              if (file) {\n                _context4.next = 3;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 3:\n              validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n              if (validTypes.includes(file.type)) {\n                _context4.next = 7;\n                break;\n              }\n              errorMessage.value = \"Please upload a valid image file (JPEG, PNG, GIF, WEBP)\";\n              return _context4.abrupt(\"return\");\n            case 7:\n              maxSize = 500 * 1024;\n              if (!(file.size > maxSize)) {\n                _context4.next = 11;\n                break;\n              }\n              errorMessage.value = \"Image size must be less than 500KB\";\n              return _context4.abrupt(\"return\");\n            case 11:\n              _context4.prev = 11;\n              isUploading.value = true;\n              uploadProgress.value = 0;\n              successMessage.value = '';\n              errorMessage.value = '';\n              if (userId.value) {\n                _context4.next = 23;\n                break;\n              }\n              id = determineUserId();\n              if (id) {\n                _context4.next = 22;\n                break;\n              }\n              errorMessage.value = \"User ID not found. Please log in again.\";\n              isUploading.value = false;\n              return _context4.abrupt(\"return\");\n            case 22:\n              userId.value = id;\n            case 23:\n              reader = new FileReader();\n              reader.onloadstart = function () {\n                uploadProgress.value = 10;\n              };\n              reader.onprogress = function (event) {\n                if (event.lengthComputable) {\n                  var progress = Math.round(event.loaded / event.total * 90);\n                  uploadProgress.value = progress;\n                }\n              };\n              reader.onerror = function () {\n                errorMessage.value = \"Failed to read image file\";\n                isUploading.value = false;\n              };\n              reader.onload = /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e) {\n                  var base64Image, currentUser, db;\n                  return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                    while (1) switch (_context3.prev = _context3.next) {\n                      case 0:\n                        _context3.prev = 0;\n                        uploadProgress.value = 95;\n                        base64Image = e.target.result;\n                        currentUser = getCurrentUser();\n                        if (!currentUser) {\n                          _context3.next = 14;\n                          break;\n                        }\n                        _context3.prev = 5;\n                        _context3.next = 8;\n                        return updateAuthProfile(currentUser, {\n                          photoURL: base64Image\n                        });\n                      case 8:\n                        console.log(\"Auth profile updated with base64 image\");\n                        _context3.next = 14;\n                        break;\n                      case 11:\n                        _context3.prev = 11;\n                        _context3.t0 = _context3[\"catch\"](5);\n                        console.error(\"Failed to update auth profile:\", _context3.t0);\n                      case 14:\n                        db = getFirestore();\n                        _context3.next = 17;\n                        return updateDoc(doc(db, 'users', userId.value), {\n                          profileImageUrl: base64Image,\n                          profileImagePath: 'base64_image',\n                          updatedAt: new Date()\n                        });\n                      case 17:\n                        profileImageUrl.value = base64Image;\n                        profileImagePath.value = 'base64_image';\n                        successMessage.value = \"Profile picture updated successfully!\";\n                        uploadProgress.value = 100;\n                        _context3.next = 27;\n                        break;\n                      case 23:\n                        _context3.prev = 23;\n                        _context3.t1 = _context3[\"catch\"](0);\n                        console.error(\"Error saving base64 image:\", _context3.t1);\n                        errorMessage.value = \"Failed to save image: \" + _context3.t1.message;\n                      case 27:\n                        _context3.prev = 27;\n                        isUploading.value = false;\n                        return _context3.finish(27);\n                      case 30:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }, _callee3, null, [[0, 23, 27, 30], [5, 11]]);\n                }));\n                return function (_x2) {\n                  return _ref4.apply(this, arguments);\n                };\n              }();\n              reader.readAsDataURL(file);\n              _context4.next = 36;\n              break;\n            case 31:\n              _context4.prev = 31;\n              _context4.t0 = _context4[\"catch\"](11);\n              console.error(\"Upload handler error:\", _context4.t0);\n              errorMessage.value = \"Failed to process image: \" + _context4.t0.message;\n              isUploading.value = false;\n            case 36:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[11, 31]]);\n      }));\n      return function handleImageUpload(_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var removeProfilePicture = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var id, currentUser, db;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              if (!isUploading.value) {\n                _context5.next = 2;\n                break;\n              }\n              return _context5.abrupt(\"return\");\n            case 2:\n              _context5.prev = 2;\n              successMessage.value = '';\n              errorMessage.value = '';\n              if (profileImageUrl.value) {\n                _context5.next = 8;\n                break;\n              }\n              errorMessage.value = \"No profile picture to remove\";\n              return _context5.abrupt(\"return\");\n            case 8:\n              isUploading.value = true;\n              console.log(\"Removing profile picture\");\n              if (userId.value) {\n                _context5.next = 17;\n                break;\n              }\n              id = determineUserId();\n              if (id) {\n                _context5.next = 16;\n                break;\n              }\n              errorMessage.value = \"User ID not found. Please log in again.\";\n              isUploading.value = false;\n              return _context5.abrupt(\"return\");\n            case 16:\n              userId.value = id;\n            case 17:\n              currentUser = getCurrentUser();\n              if (!currentUser) {\n                _context5.next = 28;\n                break;\n              }\n              _context5.prev = 19;\n              _context5.next = 22;\n              return updateAuthProfile(currentUser, {\n                photoURL: null\n              });\n            case 22:\n              console.log(\"Auth profile photo URL cleared\");\n              _context5.next = 28;\n              break;\n            case 25:\n              _context5.prev = 25;\n              _context5.t0 = _context5[\"catch\"](19);\n              console.error(\"Error updating auth profile:\", _context5.t0);\n            case 28:\n              db = getFirestore();\n              _context5.next = 31;\n              return updateDoc(doc(db, 'users', userId.value), {\n                profileImageUrl: '',\n                profileImagePath: '',\n                updatedAt: new Date()\n              });\n            case 31:\n              profileImageUrl.value = '';\n              profileImagePath.value = '';\n              successMessage.value = \"Profile picture removed successfully!\";\n              _context5.next = 40;\n              break;\n            case 36:\n              _context5.prev = 36;\n              _context5.t1 = _context5[\"catch\"](2);\n              console.error(\"Remove profile picture error:\", _context5.t1);\n              errorMessage.value = \"Failed to remove profile picture: \" + _context5.t1.message;\n            case 40:\n              _context5.prev = 40;\n              isUploading.value = false;\n              return _context5.finish(40);\n            case 43:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[2, 36, 40, 43], [19, 25]]);\n      }));\n      return function removeProfilePicture() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    var isValidEmail = function isValidEmail(email) {\n      var emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      return emailRegex.test(email);\n    };\n    var updateProfile = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var id, currentUser, db, updateData, userEmail, credential;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (!isUploading.value) {\n                _context6.next = 2;\n                break;\n              }\n              return _context6.abrupt(\"return\");\n            case 2:\n              _context6.prev = 2;\n              successMessage.value = '';\n              errorMessage.value = '';\n              if (userId.value) {\n                _context6.next = 11;\n                break;\n              }\n              id = determineUserId();\n              if (id) {\n                _context6.next = 10;\n                break;\n              }\n              errorMessage.value = \"User ID not found. Please log in again.\";\n              return _context6.abrupt(\"return\");\n            case 10:\n              userId.value = id;\n            case 11:\n              currentUser = getCurrentUser();\n              if (currentUser) {\n                _context6.next = 15;\n                break;\n              }\n              errorMessage.value = \"You must be logged in to update your profile\";\n              return _context6.abrupt(\"return\");\n            case 15:\n              if (!(!firstName.value.trim() || !lastName.value.trim())) {\n                _context6.next = 18;\n                break;\n              }\n              errorMessage.value = \"First and last name are required\";\n              return _context6.abrupt(\"return\");\n            case 18:\n              db = getFirestore();\n              updateData = {\n                firstName: firstName.value.trim(),\n                lastName: lastName.value.trim(),\n                socialLinks: socialLinks.value,\n                updatedAt: new Date()\n              };\n              console.log(\"Updating profile with data:\", updateData);\n              _context6.next = 23;\n              return updateDoc(doc(db, 'users', userId.value), updateData);\n            case 23:\n              console.log(\"Basic profile data updated successfully\");\n              if (!oldPass.value) {\n                _context6.next = 72;\n                break;\n              }\n              _context6.prev = 25;\n              console.log(\"Re-authenticating user for sensitive operations\");\n              userEmail = currentUser.email || email.value;\n              if (userEmail) {\n                _context6.next = 31;\n                break;\n              }\n              errorMessage.value = \"No email found for authentication. Please contact support.\";\n              return _context6.abrupt(\"return\");\n            case 31:\n              credential = EmailAuthProvider.credential(userEmail, oldPass.value);\n              _context6.next = 34;\n              return reauthenticateWithCredential(currentUser, credential);\n            case 34:\n              console.log(\"Re-authentication successful\");\n              if (!newPass.value) {\n                _context6.next = 46;\n                break;\n              }\n              if (!(newPass.value.length < 6)) {\n                _context6.next = 39;\n                break;\n              }\n              errorMessage.value = \"Password must be at least 6 characters\";\n              return _context6.abrupt(\"return\");\n            case 39:\n              console.log(\"Updating password\");\n              _context6.next = 42;\n              return updatePassword(currentUser, newPass.value);\n            case 42:\n              oldPass.value = '';\n              newPass.value = '';\n              successMessage.value = \"Password updated successfully!\";\n              console.log(\"Password updated successfully\");\n            case 46:\n              if (!(newEmail.value && newEmail.value !== userEmail)) {\n                _context6.next = 63;\n                break;\n              }\n              if (isValidEmail(newEmail.value)) {\n                _context6.next = 50;\n                break;\n              }\n              errorMessage.value = \"Please enter a valid email address\";\n              return _context6.abrupt(\"return\");\n            case 50:\n              console.log(\"Updating email address to:\", newEmail.value);\n              _context6.next = 53;\n              return updateEmail(currentUser, newEmail.value);\n            case 53:\n              console.log(\"Auth email updated\");\n              _context6.next = 56;\n              return sendEmailVerification(currentUser);\n            case 56:\n              console.log(\"Verification email sent\");\n              _context6.next = 59;\n              return updateDoc(doc(db, 'users', userId.value), {\n                email: newEmail.value,\n                updatedAt: new Date()\n              });\n            case 59:\n              console.log(\"Firestore email updated\");\n              email.value = newEmail.value;\n              successMessage.value = successMessage.value ? successMessage.value + \" Email updated successfully! Verification email sent.\" : \"Email updated successfully! Verification email sent.\";\n              newEmail.value = '';\n            case 63:\n              _context6.next = 70;\n              break;\n            case 65:\n              _context6.prev = 65;\n              _context6.t0 = _context6[\"catch\"](25);\n              console.error(\"Authentication error:\", _context6.t0);\n              errorMessage.value = \"Authentication failed: \" + _context6.t0.message;\n              return _context6.abrupt(\"return\");\n            case 70:\n              _context6.next = 75;\n              break;\n            case 72:\n              if (!(newPass.value || newEmail.value)) {\n                _context6.next = 75;\n                break;\n              }\n              errorMessage.value = \"Current password is required to change password or email\";\n              return _context6.abrupt(\"return\");\n            case 75:\n              if (!successMessage.value) {\n                successMessage.value = \"Profile updated successfully!\";\n              }\n              _context6.next = 82;\n              break;\n            case 78:\n              _context6.prev = 78;\n              _context6.t1 = _context6[\"catch\"](2);\n              console.error(\"Update profile error:\", _context6.t1);\n              errorMessage.value = \"Failed to update profile: \" + _context6.t1.message;\n            case 82:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[2, 78], [25, 65]]);\n      }));\n      return function updateProfile() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      var savedTheme;\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            savedTheme = localStorage.getItem('darkMode');\n            if (savedTheme !== null) {\n              darkMode.value = savedTheme === 'true';\n              if (darkMode.value) {\n                document.documentElement.classList.add('dark-theme');\n              }\n            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n              darkMode.value = true;\n              document.documentElement.classList.add('dark-theme');\n            }\n            console.log(\"ProfilePage component mounted\");\n            _context7.next = 5;\n            return fetchUserData();\n          case 5:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7);\n    })));\n    return {\n      firstName: firstName,\n      lastName: lastName,\n      oldPass: oldPass,\n      newPass: newPass,\n      newEmail: newEmail,\n      userId: userId,\n      successMessage: successMessage,\n      errorMessage: errorMessage,\n      email: email,\n      emailVerified: emailVerified,\n      isOnline: isOnline,\n      profileImageUrl: profileImageUrl,\n      isUploading: isUploading,\n      uploadProgress: uploadProgress,\n      imageUrlInput: imageUrlInput,\n      socialLinks: socialLinks,\n      darkMode: darkMode,\n      toggleDarkMode: toggleDarkMode,\n      setImageFromUrl: setImageFromUrl,\n      handleImageError: handleImageError,\n      handleImageUpload: handleImageUpload,\n      removeProfilePicture: removeProfilePicture,\n      updateProfile: updateProfile\n    };\n  }\n};","map":{"version":3,"names":["getAuth","EmailAuthProvider","reauthenticateWithCredential","updatePassword","updateEmail","sendEmailVerification","updateProfile","updateAuthProfile","getFirestore","doc","getDoc","setDoc","updateDoc","onMounted","ref","useRoute","useRouter","name","setup","route","router","firstName","lastName","oldPass","newPass","newEmail","userId","successMessage","errorMessage","email","emailVerified","isOnline","profileImageUrl","isUploading","uploadProgress","profileImagePath","imageUrlInput","darkMode","socialLinks","github","linkedin","instagram","facebook","discord","toggleDarkMode","value","document","documentElement","classList","add","remove","localStorage","setItem","getCurrentUser","auth","currentUser","determineUserId","uid","params","userid","fetchUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","db","userDoc","userData","_currentUser","wrap","_callee$","_context","prev","next","console","log","error","setTimeout","push","abrupt","sent","exists","data","_objectSpread","updatedAt","Date","createdAt","t0","message","stop","apply","arguments","setImageFromUrl","_ref2","_callee2","imgPromise","_callee2$","_context2","URL","Promise","resolve","reject","img","Image","onload","onerror","Error","src","t1","photoURL","t2","t3","finish","handleImageError","handleImageUpload","_ref3","_callee4","event","file","validTypes","maxSize","reader","_callee4$","_context4","target","files","includes","type","size","FileReader","onloadstart","onprogress","lengthComputable","progress","Math","round","loaded","total","_ref4","_callee3","e","base64Image","_callee3$","_context3","result","_x2","readAsDataURL","_x","removeProfilePicture","_ref5","_callee5","_callee5$","_context5","isValidEmail","emailRegex","test","_ref6","_callee6","updateData","userEmail","credential","_callee6$","_context6","trim","length","_callee7","savedTheme","_callee7$","_context7","getItem","window","matchMedia","matches"],"sources":["/workspaces/JAVASCRIPT-S4/Project Devgate-App/src/views/profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\" :class=\"{ 'dark-mode': darkMode }\">\r\n    <!-- Header with logo and toggle button -->\r\n    <div class=\"header-section\">\r\n      <div class=\"logo\">\r\n        <img src=\"/logoDev.jpg\" alt=\"Logo\" />\r\n        <div class=\"logo-text\">Profile Page</div>\r\n      </div>\r\n      <button @click=\"toggleDarkMode\" class=\"theme-toggle-btn\">\r\n        <i :class=\"darkMode ? 'fas fa-sun' : 'fas fa-moon'\"></i>\r\n      </button>\r\n    </div>\r\n    \r\n    <div class=\"profile-header\">\r\n      <div class=\"status-indicator\">\r\n        <span class=\"status-label\">Status:</span>\r\n        <span class=\"status-value\" :class=\"{ 'online': isOnline }\">\r\n          {{ isOnline ? 'Online' : 'Offline' }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"profile-form\">\r\n      <div class=\"profile-picture-section\">\r\n        <div class=\"profile-picture-container\">\r\n          <img \r\n            :src=\"profileImageUrl || '/default-avatar.png'\" \r\n            alt=\"Profile Picture\" \r\n            class=\"profile-picture\"\r\n            @error=\"handleImageError\"\r\n          />\r\n          <div v-if=\"isUploading\" class=\"upload-overlay\">\r\n            <div class=\"upload-progress\">{{ uploadProgress }}%</div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"profile-picture-actions\">\r\n          <div class=\"image-url-form\">\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"imageUrlInput\" \r\n              placeholder=\"Enter image URL\" \r\n              class=\"image-url-input\"\r\n            >\r\n            <button \r\n              @click=\"setImageFromUrl\" \r\n              class=\"url-button\"\r\n              :disabled=\"isUploading || !imageUrlInput\"\r\n            >\r\n              Set Image\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"or-divider\">- OR -</div>\r\n          \r\n          <label for=\"profilePicture\" class=\"upload-button\">\r\n            <span class=\"upload-icon\">üì∑</span> Choose Photo\r\n          </label>\r\n          <input \r\n            id=\"profilePicture\" \r\n            type=\"file\" \r\n            accept=\"image/*\" \r\n            @change=\"handleImageUpload\" \r\n            class=\"file-input\"\r\n          >\r\n          <button \r\n            v-if=\"profileImageUrl\" \r\n            @click=\"removeProfilePicture\" \r\n            class=\"remove-button\"\r\n            :disabled=\"isUploading\"\r\n          >\r\n            Remove Photo\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"form-group\">\r\n        <label for=\"firstName\">First Name</label>\r\n        <input\r\n          id=\"firstName\"\r\n          type=\"text\"\r\n          v-model=\"firstName\"\r\n          :placeholder=\"firstName || 'Enter your first name'\"\r\n          required\r\n        >\r\n      </div>\r\n      \r\n      <div class=\"form-group\">\r\n        <label for=\"lastName\">Last Name</label>\r\n        <input \r\n          id=\"lastName\"\r\n          type=\"text\" \r\n          v-model=\"lastName\" \r\n          :placeholder=\"lastName || 'Enter your last name'\"\r\n          required\r\n        >\r\n      </div>\r\n\r\n      <!-- Social Media Section -->\r\n      <div class=\"social-media-section\">\r\n        <h3>Social Media Accounts</h3>\r\n        <div class=\"social-input-group\">\r\n          <div class=\"social-input\">\r\n            <i class=\"fab fa-github\"></i>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"socialLinks.github\" \r\n              placeholder=\"GitHub username\"\r\n            >\r\n          </div>\r\n          <div class=\"social-input\">\r\n            <i class=\"fab fa-linkedin\"></i>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"socialLinks.linkedin\" \r\n              placeholder=\"LinkedIn URL\"\r\n            >\r\n          </div>\r\n          <div class=\"social-input\">\r\n            <i class=\"fab fa-instagram\"></i>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"socialLinks.instagram\" \r\n              placeholder=\"Instagram username\"\r\n            >\r\n          </div>\r\n          <div class=\"social-input\">\r\n            <i class=\"fab fa-facebook\"></i>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"socialLinks.facebook\" \r\n              placeholder=\"Facebook URL\"\r\n            >\r\n          </div>\r\n          <div class=\"social-input\">\r\n            <i class=\"fab fa-discord\"></i>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"socialLinks.discord\" \r\n              placeholder=\"Discord username#1234\"\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"form-group\">\r\n        <label for=\"currentPassword\">Current Password</label>\r\n        <input \r\n          id=\"currentPassword\"\r\n          type=\"password\" \r\n          v-model=\"oldPass\" \r\n          placeholder=\"Enter current password\"\r\n        >\r\n      </div>\r\n      \r\n      <div class=\"form-group\">\r\n        <label for=\"newPassword\">New Password</label>\r\n        <input \r\n          id=\"newPassword\"\r\n          type=\"password\" \r\n          v-model=\"newPass\" \r\n          placeholder=\"Enter new password\"\r\n        >\r\n      </div>\r\n      \r\n      <div class=\"form-group\">\r\n        <label for=\"newEmail\">Email</label>\r\n        <p class=\"email-help\">Type new email here if you want to change yours</p>\r\n        <input\r\n          id=\"newEmail\" \r\n          type=\"email\" \r\n          v-model=\"newEmail\" \r\n          :placeholder=\"email\"\r\n        >\r\n      </div>\r\n      \r\n      <div class=\"form-actions\">\r\n        <button @click=\"updateProfile\" class=\"save-button\" :disabled=\"isUploading\">Save Changes</button>\r\n      </div>\r\n      \r\n      <div v-if=\"successMessage\" class=\"success-message\">{{ successMessage }}</div>\r\n      <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n    </div>\r\n    \r\n    <div class=\"navigation-links\">\r\n      <router-link to=\"/dash\" class=\"back-link\">\r\n        <span class=\"back-icon\">‚Üê</span> Return to Dashboard\r\n      </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getAuth,\r\n  EmailAuthProvider,\r\n  reauthenticateWithCredential,\r\n  updatePassword,\r\n  updateEmail,\r\n  sendEmailVerification,\r\n  updateProfile as updateAuthProfile\r\n} from \"firebase/auth\";\r\nimport { getFirestore, doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\r\nimport { onMounted, ref } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: \"ProfilePage\",\r\n  setup() {\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    \r\n    // User data\r\n    const firstName = ref('');\r\n    const lastName = ref('');\r\n    const oldPass = ref('');\r\n    const newPass = ref('');\r\n    const newEmail = ref('');\r\n    const userId = ref('');\r\n    const successMessage = ref('');\r\n    const errorMessage = ref('');\r\n    const email = ref('');\r\n    const emailVerified = ref(false);\r\n    const isOnline = ref(false);\r\n    const profileImageUrl = ref('');\r\n    const isUploading = ref(false);\r\n    const uploadProgress = ref(0);\r\n    const profileImagePath = ref('');\r\n    const imageUrlInput = ref('');\r\n    const darkMode = ref(false);\r\n    \r\n    // Social media links\r\n    const socialLinks = ref({\r\n      github: '',\r\n      linkedin: '',\r\n      instagram: '',\r\n      facebook: '',\r\n      discord: ''\r\n    });\r\n\r\n    // Toggle dark mode\r\n    const toggleDarkMode = () => {\r\n      darkMode.value = !darkMode.value;\r\n      if (darkMode.value) {\r\n        document.documentElement.classList.add('dark-theme');\r\n      } else {\r\n        document.documentElement.classList.remove('dark-theme');\r\n      }\r\n      localStorage.setItem('darkMode', darkMode.value);\r\n    };\r\n\r\n    // Get current user on component load\r\n    const getCurrentUser = () => {\r\n      const auth = getAuth();\r\n      return auth.currentUser;\r\n    };\r\n    \r\n    // Safely determine user ID from either auth or route params\r\n    const determineUserId = () => {\r\n      const currentUser = getCurrentUser();\r\n      if (currentUser?.uid) {\r\n        return currentUser.uid;\r\n      }\r\n      \r\n      if (route.params.userid) {\r\n        return route.params.userid;\r\n      }\r\n      \r\n      return null;\r\n    };\r\n    \r\n    const fetchUserData = async () => {\r\n      try {\r\n        console.log(\"Fetching user data...\");\r\n        const id = determineUserId();\r\n        \r\n        if (!id) {\r\n          errorMessage.value = \"No user ID found. Please log in.\";\r\n          console.error(\"User ID not found\");\r\n          setTimeout(() => {\r\n            router.push('/dash');\r\n          }, 2000);\r\n          return;\r\n        }\r\n        \r\n        userId.value = id;\r\n        console.log(\"User ID:\", userId.value);\r\n        \r\n        const db = getFirestore();\r\n        const userDoc = await getDoc(doc(db, \"users\", userId.value));\r\n        \r\n        if (userDoc.exists()) {\r\n          const userData = userDoc.data();\r\n          firstName.value = userData.firstName || '';\r\n          lastName.value = userData.lastName || '';\r\n          email.value = userData.email || '';\r\n          isOnline.value = userData.isOnline || false;\r\n          \r\n          if (userData.profileImageUrl) {\r\n            profileImageUrl.value = userData.profileImageUrl;\r\n            profileImagePath.value = userData.profileImagePath || '';\r\n            console.log(\"Loaded profile image:\", profileImageUrl.value);\r\n          }\r\n          \r\n          if (userData.socialLinks) {\r\n            socialLinks.value = {\r\n              ...socialLinks.value,\r\n              ...userData.socialLinks\r\n            };\r\n          }\r\n          \r\n          const currentUser = getCurrentUser();\r\n          if (currentUser) {\r\n            emailVerified.value = currentUser.emailVerified || false;\r\n            \r\n            if (!email.value && currentUser.email) {\r\n              email.value = currentUser.email;\r\n              await updateDoc(doc(db, 'users', userId.value), {\r\n                email: currentUser.email,\r\n                updatedAt: new Date()\r\n              });\r\n            }\r\n          }\r\n          \r\n          console.log(\"User data loaded successfully\");\r\n        } else {\r\n          const currentUser = getCurrentUser();\r\n          \r\n          if (currentUser) {\r\n            console.log(\"Creating new user document...\");\r\n            await setDoc(doc(db, 'users', userId.value), {\r\n              firstName: '',\r\n              lastName: '',\r\n              email: currentUser.email || '',\r\n              isOnline: true,\r\n              profileImageUrl: '',\r\n              profileImagePath: '',\r\n              socialLinks: {},\r\n              createdAt: new Date()\r\n            });\r\n            \r\n            email.value = currentUser.email || '';\r\n            emailVerified.value = currentUser.emailVerified || false;\r\n            console.log(\"New user document created\");\r\n          } else {\r\n            console.error(\"No user found in Auth or Firestore\");\r\n            errorMessage.value = \"User not found. Please log in again.\";\r\n            setTimeout(() => {\r\n              router.push('/login');\r\n            }, 2000);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching user data:\", error);\r\n        errorMessage.value = \"Failed to fetch user data: \" + error.message;\r\n      }\r\n    };\r\n    \r\n    const setImageFromUrl = async () => {\r\n      if (!imageUrlInput.value) return;\r\n      \r\n      try {\r\n        successMessage.value = '';\r\n        errorMessage.value = '';\r\n        isUploading.value = true;\r\n        \r\n        if (!userId.value) {\r\n          const id = determineUserId();\r\n          if (!id) {\r\n            errorMessage.value = \"User ID not found. Please log in again.\";\r\n            isUploading.value = false;\r\n            return;\r\n          }\r\n          userId.value = id;\r\n        }\r\n        \r\n        try {\r\n          new URL(imageUrlInput.value);\r\n        } catch (e) {\r\n          errorMessage.value = \"Please enter a valid URL\";\r\n          isUploading.value = false;\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const imgPromise = new Promise((resolve, reject) => {\r\n            const img = new Image();\r\n            img.onload = () => resolve(true);\r\n            img.onerror = () => reject(new Error(\"Could not load image from URL\"));\r\n            img.src = imageUrlInput.value;\r\n          });\r\n          \r\n          await imgPromise;\r\n        } catch (loadError) {\r\n          errorMessage.value = \"Could not load image from this URL. Please check that it's a valid, accessible image URL.\";\r\n          isUploading.value = false;\r\n          return;\r\n        }\r\n        \r\n        const currentUser = getCurrentUser();\r\n        if (currentUser) {\r\n          try {\r\n            await updateAuthProfile(currentUser, {\r\n              photoURL: imageUrlInput.value\r\n            });\r\n            console.log(\"Auth profile updated with URL\");\r\n          } catch (authError) {\r\n            console.error(\"Failed to update auth profile:\", authError);\r\n          }\r\n        }\r\n        \r\n        const db = getFirestore();\r\n        await updateDoc(doc(db, 'users', userId.value), {\r\n          profileImageUrl: imageUrlInput.value,\r\n          profileImagePath: 'external_url',\r\n          updatedAt: new Date()\r\n        });\r\n        \r\n        profileImageUrl.value = imageUrlInput.value;\r\n        profileImagePath.value = 'external_url';\r\n        successMessage.value = \"Profile picture updated successfully!\";\r\n        \r\n        imageUrlInput.value = '';\r\n        \r\n      } catch (error) {\r\n        console.error(\"Set image URL error:\", error);\r\n        errorMessage.value = \"Failed to set profile picture: \" + error.message;\r\n      } finally {\r\n        isUploading.value = false;\r\n      }\r\n    };\r\n    \r\n    const handleImageError = () => {\r\n      if (profileImageUrl.value) {\r\n        errorMessage.value = \"Failed to load image. The URL may be invalid or inaccessible.\";\r\n        profileImageUrl.value = '/default-avatar.png';\r\n      }\r\n    };\r\n    \r\n    const handleImageUpload = async (event) => {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n      \r\n      const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n      if (!validTypes.includes(file.type)) {\r\n        errorMessage.value = \"Please upload a valid image file (JPEG, PNG, GIF, WEBP)\";\r\n        return;\r\n      }\r\n      \r\n      const maxSize = 500 * 1024;\r\n      if (file.size > maxSize) {\r\n        errorMessage.value = \"Image size must be less than 500KB\";\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        isUploading.value = true;\r\n        uploadProgress.value = 0;\r\n        successMessage.value = '';\r\n        errorMessage.value = '';\r\n        \r\n        if (!userId.value) {\r\n          const id = determineUserId();\r\n          if (!id) {\r\n            errorMessage.value = \"User ID not found. Please log in again.\";\r\n            isUploading.value = false;\r\n            return;\r\n          }\r\n          userId.value = id;\r\n        }\r\n        \r\n        const reader = new FileReader();\r\n        \r\n        reader.onloadstart = () => {\r\n          uploadProgress.value = 10;\r\n        };\r\n        \r\n        reader.onprogress = (event) => {\r\n          if (event.lengthComputable) {\r\n            const progress = Math.round((event.loaded / event.total) * 90);\r\n            uploadProgress.value = progress;\r\n          }\r\n        };\r\n        \r\n        reader.onerror = () => {\r\n          errorMessage.value = \"Failed to read image file\";\r\n          isUploading.value = false;\r\n        };\r\n        \r\n        reader.onload = async (e) => {\r\n          try {\r\n            uploadProgress.value = 95;\r\n            const base64Image = e.target.result;\r\n            \r\n            const currentUser = getCurrentUser();\r\n            if (currentUser) {\r\n              try {\r\n                await updateAuthProfile(currentUser, {\r\n                  photoURL: base64Image\r\n                });\r\n                console.log(\"Auth profile updated with base64 image\");\r\n              } catch (authError) {\r\n                console.error(\"Failed to update auth profile:\", authError);\r\n              }\r\n            }\r\n            \r\n            const db = getFirestore();\r\n            await updateDoc(doc(db, 'users', userId.value), {\r\n              profileImageUrl: base64Image,\r\n              profileImagePath: 'base64_image',\r\n              updatedAt: new Date()\r\n            });\r\n            \r\n            profileImageUrl.value = base64Image;\r\n            profileImagePath.value = 'base64_image';\r\n            successMessage.value = \"Profile picture updated successfully!\";\r\n            uploadProgress.value = 100;\r\n          } catch (finalError) {\r\n            console.error(\"Error saving base64 image:\", finalError);\r\n            errorMessage.value = \"Failed to save image: \" + finalError.message;\r\n          } finally {\r\n            isUploading.value = false;\r\n          }\r\n        };\r\n        \r\n        reader.readAsDataURL(file);\r\n        \r\n      } catch (error) {\r\n        console.error(\"Upload handler error:\", error);\r\n        errorMessage.value = \"Failed to process image: \" + error.message;\r\n        isUploading.value = false;\r\n      }\r\n    };\r\n    \r\n    const removeProfilePicture = async () => {\r\n      if (isUploading.value) return;\r\n      \r\n      try {\r\n        successMessage.value = '';\r\n        errorMessage.value = '';\r\n        \r\n        if (!profileImageUrl.value) {\r\n          errorMessage.value = \"No profile picture to remove\";\r\n          return;\r\n        }\r\n        \r\n        isUploading.value = true;\r\n        console.log(\"Removing profile picture\");\r\n        \r\n        if (!userId.value) {\r\n          const id = determineUserId();\r\n          if (!id) {\r\n            errorMessage.value = \"User ID not found. Please log in again.\";\r\n            isUploading.value = false;\r\n            return;\r\n          }\r\n          userId.value = id;\r\n        }\r\n        \r\n        const currentUser = getCurrentUser();\r\n        if (currentUser) {\r\n          try {\r\n            await updateAuthProfile(currentUser, {\r\n              photoURL: null\r\n            });\r\n            console.log(\"Auth profile photo URL cleared\");\r\n          } catch (authError) {\r\n            console.error(\"Error updating auth profile:\", authError);\r\n          }\r\n        }\r\n        \r\n        const db = getFirestore();\r\n        await updateDoc(doc(db, 'users', userId.value), {\r\n          profileImageUrl: '',\r\n          profileImagePath: '',\r\n          updatedAt: new Date()\r\n        });\r\n        \r\n        profileImageUrl.value = '';\r\n        profileImagePath.value = '';\r\n        successMessage.value = \"Profile picture removed successfully!\";\r\n      } catch (error) {\r\n        console.error(\"Remove profile picture error:\", error);\r\n        errorMessage.value = \"Failed to remove profile picture: \" + error.message;\r\n      } finally {\r\n        isUploading.value = false;\r\n      }\r\n    };\r\n    \r\n    const isValidEmail = (email) => {\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      return emailRegex.test(email);\r\n    };\r\n    \r\n    const updateProfile = async () => {\r\n      if (isUploading.value) return;\r\n      \r\n      try {\r\n        successMessage.value = '';\r\n        errorMessage.value = '';\r\n        \r\n        if (!userId.value) {\r\n          const id = determineUserId();\r\n          if (!id) {\r\n            errorMessage.value = \"User ID not found. Please log in again.\";\r\n            return;\r\n          }\r\n          userId.value = id;\r\n        }\r\n        \r\n        const currentUser = getCurrentUser();\r\n        if (!currentUser) {\r\n          errorMessage.value = \"You must be logged in to update your profile\";\r\n          return;\r\n        }\r\n        \r\n        if (!firstName.value.trim() || !lastName.value.trim()) {\r\n          errorMessage.value = \"First and last name are required\";\r\n          return;\r\n        }\r\n        \r\n        const db = getFirestore();\r\n        \r\n        const updateData = {\r\n          firstName: firstName.value.trim(),\r\n          lastName: lastName.value.trim(),\r\n          socialLinks: socialLinks.value,\r\n          updatedAt: new Date()\r\n        };\r\n        \r\n        console.log(\"Updating profile with data:\", updateData);\r\n        await updateDoc(doc(db, 'users', userId.value), updateData);\r\n        console.log(\"Basic profile data updated successfully\");\r\n        \r\n        if (oldPass.value) {\r\n          try {\r\n            console.log(\"Re-authenticating user for sensitive operations\");\r\n            const userEmail = currentUser.email || email.value;\r\n            if (!userEmail) {\r\n              errorMessage.value = \"No email found for authentication. Please contact support.\";\r\n              return;\r\n            }\r\n            \r\n            const credential = EmailAuthProvider.credential(userEmail, oldPass.value);\r\n            await reauthenticateWithCredential(currentUser, credential);\r\n            console.log(\"Re-authentication successful\");\r\n            \r\n            if (newPass.value) {\r\n              if (newPass.value.length < 6) {\r\n                errorMessage.value = \"Password must be at least 6 characters\";\r\n                return;\r\n              }\r\n              console.log(\"Updating password\");\r\n              await updatePassword(currentUser, newPass.value);\r\n              oldPass.value = '';\r\n              newPass.value = '';\r\n              successMessage.value = \"Password updated successfully!\";\r\n              console.log(\"Password updated successfully\");\r\n            }\r\n            \r\n            if (newEmail.value && newEmail.value !== userEmail) {\r\n              if (!isValidEmail(newEmail.value)) {\r\n                errorMessage.value = \"Please enter a valid email address\";\r\n                return;\r\n              }\r\n              \r\n              console.log(\"Updating email address to:\", newEmail.value);\r\n              await updateEmail(currentUser, newEmail.value);\r\n              console.log(\"Auth email updated\");\r\n              \r\n              await sendEmailVerification(currentUser);\r\n              console.log(\"Verification email sent\");\r\n              \r\n              await updateDoc(doc(db, 'users', userId.value), {\r\n                email: newEmail.value,\r\n                updatedAt: new Date()\r\n              });\r\n              console.log(\"Firestore email updated\");\r\n              \r\n              email.value = newEmail.value;\r\n              \r\n              successMessage.value = successMessage.value \r\n                ? successMessage.value + \" Email updated successfully! Verification email sent.\"\r\n                : \"Email updated successfully! Verification email sent.\";\r\n              \r\n              newEmail.value = '';\r\n            }\r\n          } catch (authError) {\r\n            console.error(\"Authentication error:\", authError);\r\n            errorMessage.value = \"Authentication failed: \" + authError.message;\r\n            return;\r\n          }\r\n        } else if (newPass.value || newEmail.value) {\r\n          errorMessage.value = \"Current password is required to change password or email\";\r\n          return;\r\n        }\r\n        \r\n        if (!successMessage.value) {\r\n          successMessage.value = \"Profile updated successfully!\";\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Update profile error:\", error);\r\n        errorMessage.value = \"Failed to update profile: \" + error.message;\r\n      }\r\n    };\r\n    \r\n    onMounted(async () => {\r\n      const savedTheme = localStorage.getItem('darkMode');\r\n      if (savedTheme !== null) {\r\n        darkMode.value = savedTheme === 'true';\r\n        if (darkMode.value) {\r\n          document.documentElement.classList.add('dark-theme');\r\n        }\r\n      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n        darkMode.value = true;\r\n        document.documentElement.classList.add('dark-theme');\r\n      }\r\n      \r\n      console.log(\"ProfilePage component mounted\");\r\n      await fetchUserData();\r\n    });\r\n    \r\n    return {\r\n      firstName,\r\n      lastName,\r\n      oldPass,\r\n      newPass,\r\n      newEmail,\r\n      userId,\r\n      successMessage,\r\n      errorMessage,\r\n      email,\r\n      emailVerified,\r\n      isOnline,\r\n      profileImageUrl,\r\n      isUploading,\r\n      uploadProgress,\r\n      imageUrlInput,\r\n      socialLinks,\r\n      darkMode,\r\n      toggleDarkMode,\r\n      setImageFromUrl,\r\n      handleImageError,\r\n      handleImageUpload,\r\n      removeProfilePicture,\r\n      updateProfile\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* CSS Variables for Light Mode */\r\n.profile-container {\r\n  --primary-blue: #3498db;\r\n  --primary-dark-blue: #2980b9;\r\n  --primary-light-blue: #e1f0fa;\r\n  --secondary-blue: #2c3e50;\r\n  --accent-blue: #1abc9c;\r\n  --text-color: #2c3e50;\r\n  --text-light: #7f8c8d;\r\n  --bg-color: #f9f9f9;\r\n  --card-bg: #ffffff;\r\n  --border-color: #eaeaea;\r\n  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);\r\n  \r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  color: var(--text-color);\r\n  background-color: var(--bg-color);\r\n  border-radius: 10px;\r\n  box-shadow: var(--shadow-lg);\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n/* Dark Mode Variables */\r\n.profile-container.dark-mode {\r\n  --primary-blue: #3498db;\r\n  --primary-dark-blue: #2980b9;\r\n  --primary-light-blue: rgba(52, 152, 219, 0.1);\r\n  --secondary-blue: #ecf0f1;\r\n  --accent-blue: #1abc9c;\r\n  --text-color: #ecf0f1;\r\n  --text-light: #bdc3c7;\r\n  --bg-color: #0f172a;\r\n  --card-bg: #1e293b;\r\n  --border-color: #334155;\r\n  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);\r\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);\r\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n/* Header Section */\r\n.header-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n/* Theme Toggle Button */\r\n.theme-toggle-btn {\r\n  background: var(--primary-light-blue);\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  color: var(--primary-blue);\r\n  transition: all 0.3s;\r\n}\r\n\r\n.theme-toggle-btn:hover {\r\n  background: var(--primary-blue);\r\n  color: white;\r\n  transform: rotate(15deg);\r\n}\r\n\r\n/* Logo Styles */\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.logo img {\r\n  height: 100px;\r\n  width: 100px;\r\n  \r\n}\r\n\r\n.logo-text {\r\n  font-size: 1.8em;\r\n  color: var(--primary-blue);\r\n  font-weight: bold;\r\n}\r\n\r\n.profile-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid var(--border-color);\r\n}\r\n\r\n.profile-header h2 {\r\n  color: var(--secondary-blue);\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.status-indicator {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  background-color: var(--card-bg);\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 20px;\r\n  box-shadow: var(--shadow-sm);\r\n}\r\n\r\n.status-label {\r\n  font-weight: 500;\r\n  margin-right: 0.5rem;\r\n  color: var(--text-light);\r\n}\r\n\r\n.status-value {\r\n  font-weight: 600;\r\n}\r\n\r\n.status-value.online {\r\n  color: #4CAF50;\r\n}\r\n\r\n.profile-form {\r\n  background-color: var(--card-bg);\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  box-shadow: var(--shadow-md);\r\n}\r\n\r\n/* Profile Picture Section */\r\n.profile-picture-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.profile-picture-container {\r\n  position: relative;\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  margin-bottom: 1rem;\r\n  border: 3px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n}\r\n\r\n.profile-picture {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.upload-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n.profile-picture-actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 100%;\r\n  max-width: 400px;\r\n}\r\n\r\n.image-url-form {\r\n  display: flex;\r\n  width: 100%;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.image-url-input {\r\n  flex: 1;\r\n  padding: 0.6rem;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px 0 0 4px;\r\n  font-size: 0.9rem;\r\n  background-color: var(--card-bg);\r\n  color: var(--text-color);\r\n}\r\n\r\n.url-button {\r\n  padding: 0.6rem 1rem;\r\n  background-color: var(--primary-blue);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 0 4px 4px 0;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.url-button:hover:not(:disabled) {\r\n  background-color: var(--primary-dark-blue);\r\n}\r\n\r\n.url-button:disabled {\r\n  background-color: var(--border-color);\r\n  cursor: not-allowed;\r\n}\r\n\r\n.or-divider {\r\n  margin: 0.5rem 0;\r\n  color: var(--text-light);\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.upload-button {\r\n  display: inline-block;\r\n  padding: 0.6rem 1rem;\r\n  background-color: #2ecc71;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-bottom: 0.5rem;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.upload-button:hover {\r\n  background-color: #27ae60;\r\n}\r\n\r\n.file-input {\r\n  display: none;\r\n}\r\n\r\n.remove-button {\r\n  padding: 0.6rem 1rem;\r\n  background-color: #e74c3c;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.remove-button:hover:not(:disabled) {\r\n  background-color: #c0392b;\r\n}\r\n\r\n.remove-button:disabled {\r\n  background-color: var(--border-color);\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* Form Groups */\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: var(--secondary-blue);\r\n}\r\n\r\n.form-group input {\r\n  width: 100%;\r\n  padding: 0.8rem;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n  background-color: var(--card-bg);\r\n  color: var(--text-color);\r\n}\r\n\r\n.form-group input:focus {\r\n  border-color: var(--primary-blue);\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\r\n}\r\n\r\n.email-help {\r\n  margin: 0.3rem 0;\r\n  font-size: 0.85rem;\r\n  color: var(--text-light);\r\n}\r\n\r\n/* Social Media Section */\r\n.social-media-section {\r\n  margin: 2rem 0;\r\n  padding: 1.5rem;\r\n  background-color: var(--primary-light-blue);\r\n  border-radius: 8px;\r\n}\r\n\r\n.social-media-section h3 {\r\n  margin-top: 0;\r\n  margin-bottom: 1.5rem;\r\n  color: var(--secondary-blue);\r\n}\r\n\r\n.social-input-group {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.social-input {\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: var(--card-bg);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  padding: 0.5rem;\r\n}\r\n\r\n.social-input i {\r\n  width: 30px;\r\n  text-align: center;\r\n  color: var(--text-light);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.social-input input {\r\n  flex: 1;\r\n  border: none;\r\n  padding: 0.5rem;\r\n  font-size: 0.9rem;\r\n  background-color: transparent;\r\n  color: var(--text-color);\r\n}\r\n\r\n.social-input input:focus {\r\n  outline: none;\r\n  box-shadow: none;\r\n}\r\n\r\n/* Form Actions */\r\n.form-actions {\r\n  margin-top: 2rem;\r\n  text-align: center;\r\n}\r\n\r\n.save-button {\r\n  padding: 0.8rem 2rem;\r\n  background-color: var(--primary-blue);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.save-button:hover:not(:disabled) {\r\n  background-color: var(--primary-dark-blue);\r\n}\r\n\r\n.save-button:disabled {\r\n  background-color: var(--border-color);\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* Messages */\r\n.success-message {\r\n  margin-top: 1.5rem;\r\n  padding: 1rem;\r\n  background-color: #dff0d8;\r\n  color: #3c763d;\r\n  border-radius: 4px;\r\n  border-left: 4px solid #3c763d;\r\n}\r\n\r\n.error-message {\r\n  margin-top: 1.5rem;\r\n  padding: 1rem;\r\n  background-color: #f2dede;\r\n  color: #a94442;\r\n  border-radius: 4px;\r\n  border-left: 4px solid #a94442;\r\n}\r\n\r\n/* Navigation Links */\r\n.navigation-links {\r\n  margin-top: 2rem;\r\n  text-align: center;\r\n}\r\n\r\n.back-link {\r\n  display: inline-block;\r\n  padding: 0.6rem 1rem;\r\n  color: var(--primary-blue);\r\n  text-decoration: none;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.back-link:hover {\r\n  color: var(--primary-dark-blue);\r\n}\r\n\r\n.back-icon {\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n/* Font Awesome Icons */\r\n@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css');\r\n\r\n/* Responsive Design */\r\n@media (max-width: 768px) {\r\n  .profile-container {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .profile-form {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .social-input-group {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .logo-text {\r\n    font-size: 1.5em;\r\n  }\r\n  \r\n  .logo img {\r\n    height: 50px;\r\n    width: 50px;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}