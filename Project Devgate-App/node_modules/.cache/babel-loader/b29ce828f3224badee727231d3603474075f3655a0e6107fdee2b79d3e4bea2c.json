{"ast":null,"code":"import _objectSpread from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/workspaces/JAVASCRIPT-S4/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { getFirestore, collection, addDoc, getDocs, getDoc, query, orderBy, serverTimestamp, doc, updateDoc, deleteDoc, where } from \"firebase/firestore\";\nimport { Chart, registerables } from 'chart.js';\nChart.register.apply(Chart, _toConsumableArray(registerables));\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nexport default {\n  name: 'EnhancedActivitiesPage',\n  data: function data() {\n    return {\n      unsubscribe: null,\n      filterCategory: '',\n      showCategoriesModal: false,\n      newCategory: '',\n      db: null,\n      auth: null,\n      userId: null,\n      showAddForm: false,\n      activities: [],\n      loading: true,\n      editingProgressId: null,\n      activityProgress: 0,\n      progressColor: '#4a89dc',\n      searchQuery: '',\n      filterStatus: 'all',\n      sortBy: 'date-desc',\n      sortField: 'date',\n      sortDirection: 'desc',\n      showDeleteModal: false,\n      activityToDelete: null,\n      showLogModal: false,\n      selectedActivity: null,\n      activityLogs: [],\n      logProgress: 0,\n      logNotes: '',\n      currentView: 'cards',\n      // 'cards', 'list', 'table'\n      expandedActivities: [],\n      progressChart: null,\n      categoryChart: null,\n      defaultCategories: ['Learning', 'Project', 'Work', 'Personal', 'Health', 'Finance', 'Creative', 'Other'],\n      userCategories: [],\n      newActivity: {\n        objective: \"\",\n        category: \"\",\n        customCategory: \"\",\n        tools: [\"\"],\n        done: false,\n        progress: 0,\n        priority: \"medium\",\n        deadline: \"\",\n        notes: \"\",\n        favorite: false\n      }\n    };\n  },\n  computed: {\n    allCategories: function allCategories() {\n      return [].concat(_toConsumableArray(this.defaultCategories), _toConsumableArray(this.userCategories));\n    },\n    completedActivities: function completedActivities() {\n      return this.activities.filter(function (a) {\n        return a.progress === 100;\n      }).length;\n    },\n    inProgressActivities: function inProgressActivities() {\n      return this.activities.filter(function (a) {\n        return a.progress < 100;\n      }).length;\n    },\n    highPriorityActivities: function highPriorityActivities() {\n      return this.activities.filter(function (a) {\n        return a.priority === 'high';\n      }).length;\n    },\n    overdueActivities: function overdueActivities() {\n      var _this = this;\n      return this.activities.filter(function (a) {\n        return _this.isOverdue(a.deadline) && a.progress !== 100;\n      }).length;\n    },\n    filteredActivities: function filteredActivities() {\n      var _this2 = this;\n      var filtered = _toConsumableArray(this.activities);\n\n      // Apply status filter\n      switch (this.filterStatus) {\n        case 'completed':\n          filtered = filtered.filter(function (a) {\n            return a.progress === 100;\n          });\n          break;\n        case 'in-progress':\n          filtered = filtered.filter(function (a) {\n            return a.progress < 100;\n          });\n          break;\n        case 'overdue':\n          filtered = filtered.filter(function (a) {\n            return _this2.isOverdue(a.deadline) && a.progress !== 100;\n          });\n          break;\n        case 'favorites':\n          filtered = filtered.filter(function (a) {\n            return a.favorite;\n          });\n          break;\n      }\n      if (this.filterCategory) {\n        filtered = filtered.filter(function (a) {\n          return _this2.displayCategory(a) === _this2.filterCategory;\n        });\n      }\n      // Apply search filter\n      if (this.searchQuery) {\n        var _query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(function (a) {\n          return a.objective.toLowerCase().includes(_query) || a.tools && a.tools.some(function (tool) {\n            return tool.toLowerCase().includes(_query);\n          }) || a.notes && a.notes.toLowerCase().includes(_query) || _this2.displayCategory(a).toLowerCase().includes(_query);\n        });\n      }\n      // Apply sorting\n      switch (this.sortBy) {\n        case 'date-asc':\n          filtered.sort(function (a, b) {\n            var _a$startedAt, _b$startedAt;\n            return (((_a$startedAt = a.startedAt) === null || _a$startedAt === void 0 ? void 0 : _a$startedAt.seconds) || 0) - (((_b$startedAt = b.startedAt) === null || _b$startedAt === void 0 ? void 0 : _b$startedAt.seconds) || 0);\n          });\n          break;\n        case 'progress-asc':\n          filtered.sort(function (a, b) {\n            return (a.progress || 0) - (b.progress || 0);\n          });\n          break;\n        case 'progress-desc':\n          filtered.sort(function (a, b) {\n            return (b.progress || 0) - (a.progress || 0);\n          });\n          break;\n        case 'priority':\n          var priorityOrder = {\n            high: 3,\n            medium: 2,\n            low: 1\n          };\n          filtered.sort(function (a, b) {\n            return priorityOrder[b.priority || 'medium'] - priorityOrder[a.priority || 'medium'];\n          });\n          break;\n        case 'deadline':\n          filtered.sort(function (a, b) {\n            if (!a.deadline && !b.deadline) return 0;\n            if (!a.deadline) return 1;\n            if (!b.deadline) return -1;\n            return new Date(a.deadline) - new Date(b.deadline);\n          });\n          break;\n        default:\n          // date-desc\n          filtered.sort(function (a, b) {\n            var _b$startedAt2, _a$startedAt2;\n            return (((_b$startedAt2 = b.startedAt) === null || _b$startedAt2 === void 0 ? void 0 : _b$startedAt2.seconds) || 0) - (((_a$startedAt2 = a.startedAt) === null || _a$startedAt2 === void 0 ? void 0 : _a$startedAt2.seconds) || 0);\n          });\n      }\n      return filtered;\n    },\n    progressDistribution: function progressDistribution() {\n      var distribution = {\n        '0-20%': 0,\n        '21-40%': 0,\n        '41-60%': 0,\n        '61-80%': 0,\n        '81-100%': 0\n      };\n      this.activities.forEach(function (activity) {\n        var progress = activity.progress || 0;\n        if (progress <= 20) {\n          distribution['0-20%']++;\n        } else if (progress <= 40) {\n          distribution['21-40%']++;\n        } else if (progress <= 60) {\n          distribution['41-60%']++;\n        } else if (progress <= 80) {\n          distribution['61-80%']++;\n        } else {\n          distribution['81-100%']++;\n        }\n      });\n      return distribution;\n    },\n    categoryDistribution: function categoryDistribution() {\n      var _this3 = this;\n      var distribution = {};\n      this.activities.forEach(function (activity) {\n        var category = _this3.displayCategory(activity) || 'Uncategorized';\n        distribution[category] = (distribution[category] || 0) + 1;\n      });\n      return distribution;\n    }\n  },\n  methods: {\n    handleCategoryChange: function handleCategoryChange() {\n      if (this.newActivity.category === 'custom') {\n        this.openCategoriesModal();\n        this.newActivity.customCategory = '';\n      }\n    },\n    openCategoriesModal: function openCategoriesModal() {\n      this.showCategoriesModal = true;\n      this.newCategory = '';\n    },\n    addCategory: function addCategory() {\n      if (this.newCategory.trim() && !this.userCategories.includes(this.newCategory.trim())) {\n        this.userCategories.push(this.newCategory.trim());\n        this.newCategory = '';\n      }\n    },\n    removeCategory: function removeCategory(index) {\n      this.userCategories.splice(index, 1);\n    },\n    saveCategories: function saveCategories() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var userRef;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              if (_this4.userId) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              userRef = doc(_this4.db, \"users\", _this4.userId);\n              _context.next = 6;\n              return updateDoc(userRef, {\n                categories: _this4.userCategories\n              });\n            case 6:\n              _this4.showCategoriesModal = false;\n              _context.next = 13;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"Error saving categories:\", _context.t0);\n              alert(\"Failed to save categories: \".concat(_context.t0.message));\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 9]]);\n      }))();\n    },\n    resetFilters: function resetFilters() {\n      this.searchQuery = '';\n      this.filterStatus = 'all';\n      this.sortBy = 'date-desc';\n    },\n    displayCategory: function displayCategory(activity) {\n      return activity.customCategory || activity.category || '';\n    },\n    toggleAddForm: function toggleAddForm() {\n      this.showAddForm = !this.showAddForm;\n      if (!this.showAddForm) {\n        this.resetForm();\n      }\n    },\n    updateProgressColor: function updateProgressColor() {\n      var progress = this.newActivity.progress;\n      if (progress < 30) {\n        this.progressColor = '#ff9800';\n      } else if (progress < 70) {\n        this.progressColor = '#2196f3';\n      } else {\n        this.progressColor = '#4caf50';\n      }\n    },\n    toggleEditProgress: function toggleEditProgress(activityId) {\n      if (this.editingProgressId === activityId) {\n        this.editingProgressId = null;\n      } else {\n        var activity = this.activities.find(function (a) {\n          return a.id === activityId;\n        });\n        if (activity) {\n          this.activityProgress = activity.progress || 0;\n          this.editingProgressId = activityId;\n        }\n      }\n    },\n    updateProgress: function updateProgress(activityId) {\n      var _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var progress, validProgress, activityRef, activityIndex;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(!_this5.userId || !activityId)) {\n                _context2.next = 3;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 3:\n              progress = parseInt(_this5.activityProgress) || 0;\n              validProgress = Math.max(0, Math.min(100, progress));\n              activityRef = doc(_this5.db, \"users\", _this5.userId, \"activities\", activityId);\n              _context2.next = 8;\n              return updateDoc(activityRef, _objectSpread({\n                progress: validProgress,\n                done: validProgress === 100\n              }, validProgress === 100 ? {\n                completedAt: serverTimestamp()\n              } : {}));\n            case 8:\n              activityIndex = _this5.activities.findIndex(function (a) {\n                return a.id === activityId;\n              });\n              if (activityIndex !== -1) {\n                _this5.activities[activityIndex].progress = validProgress;\n                _this5.activities[activityIndex].done = validProgress === 100;\n                if (validProgress === 100) {\n                  _this5.activities[activityIndex].completedAt = {\n                    seconds: Math.floor(Date.now() / 1000)\n                  };\n                }\n              }\n              _this5.editingProgressId = null;\n              _this5.updateCharts();\n              _context2.next = 18;\n              break;\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(\"Error updating progress:\", _context2.t0);\n              alert(\"Failed to update progress: \".concat(_context2.t0.message));\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 14]]);\n      }))();\n    },\n    updateActivityProgress: function updateActivityProgress(activityId, progress) {\n      var _this6 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _this6.activityProgress = progress;\n              _context3.next = 3;\n              return _this6.updateProgress(activityId);\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    },\n    completeActivity: function completeActivity(activityId) {\n      var _this7 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _this7.activityProgress = 100;\n              _context4.next = 3;\n              return _this7.updateProgress(activityId);\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }))();\n    },\n    confirmDelete: function confirmDelete(activityId) {\n      this.activityToDelete = activityId;\n      this.showDeleteModal = true;\n    },\n    deleteActivity: function deleteActivity() {\n      var _this8 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var activityRef;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              if (!(!_this8.userId || !_this8.activityToDelete)) {\n                _context5.next = 3;\n                break;\n              }\n              return _context5.abrupt(\"return\");\n            case 3:\n              activityRef = doc(_this8.db, \"users\", _this8.userId, \"activities\", _this8.activityToDelete);\n              _context5.next = 6;\n              return deleteDoc(activityRef);\n            case 6:\n              _this8.activities = _this8.activities.filter(function (a) {\n                return a.id !== _this8.activityToDelete;\n              });\n              _this8.showDeleteModal = false;\n              _this8.activityToDelete = null;\n              _this8.updateCharts();\n              _context5.next = 16;\n              break;\n            case 12:\n              _context5.prev = 12;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.error(\"Error deleting activity:\", _context5.t0);\n              alert(\"Failed to delete activity: \".concat(_context5.t0.message));\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[0, 12]]);\n      }))();\n    },\n    addTool: function addTool() {\n      this.newActivity.tools.push(\"\");\n    },\n    removeTool: function removeTool(index) {\n      this.newActivity.tools.splice(index, 1);\n      if (this.newActivity.tools.length === 0) {\n        this.newActivity.tools.push(\"\");\n      }\n    },\n    resetForm: function resetForm() {\n      this.newActivity = {\n        objective: \"\",\n        category: \"\",\n        customCategory: \"\",\n        tools: [\"\"],\n        done: false,\n        progress: 0,\n        priority: \"medium\",\n        deadline: \"\",\n        notes: \"\",\n        favorite: false\n      };\n      this.progressColor = '#4a89dc';\n    },\n    formatDate: function formatDate(timestamp) {\n      var _short = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!timestamp) return 'N/A';\n      try {\n        var date = timestamp.toDate();\n        if (_short) {\n          return date.toLocaleDateString('en-US', {\n            month: 'short',\n            day: 'numeric'\n          });\n        }\n        return date.toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      } catch (error) {\n        console.error(\"Date formatting error:\", error);\n        return 'Invalid date';\n      }\n    },\n    formatDeadline: function formatDeadline(dateString) {\n      if (!dateString) return '';\n      var date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    },\n    isDeadlineApproaching: function isDeadlineApproaching(dateString) {\n      if (!dateString) return false;\n      var deadline = new Date(dateString);\n      var today = new Date();\n      var diffTime = deadline - today;\n      var diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      return diffDays <= 3 && diffDays >= 0;\n    },\n    isOverdue: function isOverdue(dateString) {\n      if (!dateString) return false;\n      var deadline = new Date(dateString);\n      var today = new Date();\n      return deadline < today;\n    },\n    sortByField: function sortByField(field) {\n      if (this.sortField === field) {\n        this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n      } else {\n        this.sortField = field;\n        this.sortDirection = 'desc';\n      }\n      this.sortBy = \"\".concat(field, \"-\").concat(this.sortDirection);\n    },\n    submitActivity: function submitActivity() {\n      var _this9 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var filteredTools, progress, validProgress, isDone, activityData, activityRef, index, userActivitiesRef;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              if (!(!_this9.userId || _this9.userId.trim() === \"\")) {\n                _context6.next = 4;\n                break;\n              }\n              alert(\"You must be logged in to add activities. Please login and try again.\");\n              return _context6.abrupt(\"return\");\n            case 4:\n              // Validate and prepare data\n              filteredTools = _this9.newActivity.tools.filter(function (tool) {\n                return tool && tool.trim() !== \"\";\n              });\n              progress = parseInt(_this9.newActivity.progress) || 0;\n              validProgress = Math.max(0, Math.min(100, progress));\n              isDone = validProgress === 100;\n              activityData = {\n                objective: (_this9.newActivity.objective || \"\").trim(),\n                category: _this9.newActivity.category === 'custom' ? '' : _this9.newActivity.category,\n                customCategory: _this9.newActivity.category === 'custom' ? _this9.newActivity.customCategory : '',\n                tools: filteredTools || [],\n                done: isDone,\n                progress: validProgress,\n                priority: _this9.newActivity.priority || 'medium',\n                notes: _this9.newActivity.notes || '',\n                favorite: _this9.newActivity.favorite || false\n              }; // Add deadline if provided\n              if (_this9.newActivity.deadline) {\n                activityData.deadline = _this9.newActivity.deadline;\n              }\n\n              // If editing existing activity\n              if (!_this9.currentActivityId) {\n                _context6.next = 18;\n                break;\n              }\n              activityRef = doc(_this9.db, \"users\", _this9.userId, \"activities\", _this9.currentActivityId);\n              _context6.next = 14;\n              return updateDoc(activityRef, activityData);\n            case 14:\n              // Update local state\n              index = _this9.activities.findIndex(function (a) {\n                return a.id === _this9.currentActivityId;\n              });\n              if (index !== -1) {\n                _this9.activities[index] = _objectSpread(_objectSpread({}, _this9.activities[index]), activityData);\n              }\n              _context6.next = 23;\n              break;\n            case 18:\n              activityData.startedAt = serverTimestamp();\n              if (isDone) {\n                activityData.completedAt = serverTimestamp();\n              }\n              userActivitiesRef = collection(_this9.db, \"users\", _this9.userId, \"activities\");\n              _context6.next = 23;\n              return addDoc(userActivitiesRef, activityData);\n            case 23:\n              _context6.next = 25;\n              return _this9.loadActivities();\n            case 25:\n              _this9.resetForm();\n              _this9.showAddForm = false;\n              _this9.currentActivityId = null;\n              _context6.next = 34;\n              break;\n            case 30:\n              _context6.prev = 30;\n              _context6.t0 = _context6[\"catch\"](0);\n              console.error(\"Error saving activity:\", _context6.t0);\n              alert(\"Failed to save activity: \".concat(_context6.t0.message));\n            case 34:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[0, 30]]);\n      }))();\n    },\n    loadActivities: function loadActivities() {\n      var _this10 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var userActivitiesRef, activitiesQuery, querySnapshot, userDocRef, userDoc;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              if (_this10.userId) {\n                _context7.next = 5;\n                break;\n              }\n              console.warn(\"Cannot load activities: No user ID available\");\n              _this10.loading = false;\n              _this10.activities = [];\n              return _context7.abrupt(\"return\");\n            case 5:\n              _this10.loading = true;\n              _context7.prev = 6;\n              userActivitiesRef = collection(_this10.db, \"users\", _this10.userId, \"activities\");\n              activitiesQuery = query(userActivitiesRef, orderBy(\"startedAt\", \"desc\"));\n              _context7.next = 11;\n              return getDocs(activitiesQuery);\n            case 11:\n              querySnapshot = _context7.sent;\n              _this10.activities = querySnapshot.docs.map(function (doc) {\n                var data = doc.data();\n                var progress = parseInt(data.progress) || 0;\n                return {\n                  id: doc.id,\n                  objective: data.objective || \"Untitled Activity\",\n                  category: data.category || '',\n                  customCategory: data.customCategory || '',\n                  tools: Array.isArray(data.tools) ? data.tools : [],\n                  done: progress === 100 ? true : Boolean(data.done),\n                  startedAt: data.startedAt || null,\n                  completedAt: data.completedAt || null,\n                  userId: data.userId || _this10.userId,\n                  progress: progress,\n                  priority: data.priority || 'medium',\n                  deadline: data.deadline || null,\n                  notes: data.notes || '',\n                  favorite: data.favorite || false\n                };\n              });\n\n              // Load user categories if they exist\n              userDocRef = doc(_this10.db, \"users\", _this10.userId);\n              _context7.next = 16;\n              return getDoc(userDocRef);\n            case 16:\n              userDoc = _context7.sent;\n              if (userDoc.exists() && userDoc.data().categories) {\n                _this10.userCategories = userDoc.data().categories;\n              }\n              _this10.updateCharts();\n              _context7.next = 26;\n              break;\n            case 21:\n              _context7.prev = 21;\n              _context7.t0 = _context7[\"catch\"](6);\n              console.error(\"Error loading activities:\", _context7.t0);\n              if (_context7.t0.code === 'permission-denied') {\n                alert(\"Permission denied. You may not have access to view these activities.\");\n              } else {\n                alert(\"Failed to load activities: \".concat(_context7.t0.message));\n              }\n              _this10.activities = [];\n            case 26:\n              _context7.prev = 26;\n              _this10.loading = false;\n              return _context7.finish(26);\n            case 29:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, null, [[6, 21, 26, 29]]);\n      }))();\n    },\n    toggleFavorite: function toggleFavorite(activityId) {\n      var _this11 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var activity, newFavoriteStatus, activityRef;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.prev = 0;\n              if (!(!_this11.userId || !activityId)) {\n                _context8.next = 3;\n                break;\n              }\n              return _context8.abrupt(\"return\");\n            case 3:\n              activity = _this11.activities.find(function (a) {\n                return a.id === activityId;\n              });\n              if (activity) {\n                _context8.next = 6;\n                break;\n              }\n              return _context8.abrupt(\"return\");\n            case 6:\n              newFavoriteStatus = !activity.favorite;\n              activityRef = doc(_this11.db, \"users\", _this11.userId, \"activities\", activityId);\n              _context8.next = 10;\n              return updateDoc(activityRef, {\n                favorite: newFavoriteStatus\n              });\n            case 10:\n              activity.favorite = newFavoriteStatus;\n              _context8.next = 17;\n              break;\n            case 13:\n              _context8.prev = 13;\n              _context8.t0 = _context8[\"catch\"](0);\n              console.error(\"Error toggling favorite:\", _context8.t0);\n              alert(\"Failed to update favorite status: \".concat(_context8.t0.message));\n            case 17:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, null, [[0, 13]]);\n      }))();\n    },\n    markAsComplete: function markAsComplete(activityId) {\n      var _this12 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        var activityRef, activity;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.prev = 0;\n              if (!(!_this12.userId || !activityId)) {\n                _context9.next = 3;\n                break;\n              }\n              return _context9.abrupt(\"return\");\n            case 3:\n              activityRef = doc(_this12.db, \"users\", _this12.userId, \"activities\", activityId);\n              _context9.next = 6;\n              return updateDoc(activityRef, {\n                progress: 100,\n                done: true,\n                completedAt: serverTimestamp()\n              });\n            case 6:\n              // Update local state\n              activity = _this12.activities.find(function (a) {\n                return a.id === activityId;\n              });\n              if (activity) {\n                activity.progress = 100;\n                activity.done = true;\n                activity.completedAt = {\n                  seconds: Math.floor(Date.now() / 1000)\n                };\n              }\n              _this12.updateCharts();\n              _context9.next = 15;\n              break;\n            case 11:\n              _context9.prev = 11;\n              _context9.t0 = _context9[\"catch\"](0);\n              console.error(\"Error marking as complete:\", _context9.t0);\n              alert(\"Failed to mark as complete: \".concat(_context9.t0.message));\n            case 15:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, null, [[0, 11]]);\n      }))();\n    },\n    editActivity: function editActivity(activity) {\n      this.newActivity = {\n        objective: activity.objective,\n        category: activity.customCategory ? 'custom' : activity.category || '',\n        customCategory: activity.customCategory || '',\n        tools: _toConsumableArray(activity.tools || []),\n        progress: activity.progress || 0,\n        priority: activity.priority || 'medium',\n        deadline: activity.deadline || '',\n        notes: activity.notes || '',\n        favorite: activity.favorite || false\n      };\n      this.currentActivityId = activity.id;\n      this.isEditing = true;\n      this.showAddForm = true;\n\n      // Scroll to form\n      this.$nextTick(function () {\n        var _document$querySelect;\n        (_document$querySelect = document.querySelector('.activity-form')) === null || _document$querySelect === void 0 || _document$querySelect.scrollIntoView({\n          behavior: 'smooth'\n        });\n      });\n    },\n    toggleActivityDetails: function toggleActivityDetails(activityId) {\n      var index = this.expandedActivities.indexOf(activityId);\n      if (index === -1) {\n        this.expandedActivities.push(activityId);\n      } else {\n        this.expandedActivities.splice(index, 1);\n      }\n    },\n    showActivityLog: function showActivityLog(activity) {\n      var _this13 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var logsRef, logsQuery, querySnapshot;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              _this13.selectedActivity = activity;\n              _this13.logProgress = activity.progress || 0;\n              _this13.logNotes = '';\n              _this13.showLogModal = true;\n              _context10.prev = 4;\n              logsRef = collection(_this13.db, \"users\", _this13.userId, \"activities\", activity.id, \"logs\");\n              logsQuery = query(logsRef, orderBy(\"timestamp\", \"desc\"));\n              _context10.next = 9;\n              return getDocs(logsQuery);\n            case 9:\n              querySnapshot = _context10.sent;\n              _this13.activityLogs = querySnapshot.docs.map(function (doc) {\n                return _objectSpread({\n                  id: doc.id\n                }, doc.data());\n              });\n              _context10.next = 17;\n              break;\n            case 13:\n              _context10.prev = 13;\n              _context10.t0 = _context10[\"catch\"](4);\n              console.error(\"Error loading activity logs:\", _context10.t0);\n              _this13.activityLogs = [];\n            case 17:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, null, [[4, 13]]);\n      }))();\n    },\n    addLogEntry: function addLogEntry() {\n      var _this14 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n        var logsRef;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              _context11.prev = 0;\n              if (!(!_this14.userId || !_this14.selectedActivity)) {\n                _context11.next = 3;\n                break;\n              }\n              return _context11.abrupt(\"return\");\n            case 3:\n              logsRef = collection(_this14.db, \"users\", _this14.userId, \"activities\", _this14.selectedActivity.id, \"logs\");\n              _context11.next = 6;\n              return addDoc(logsRef, {\n                progress: _this14.logProgress,\n                notes: _this14.logNotes,\n                timestamp: serverTimestamp()\n              });\n            case 6:\n              if (!(_this14.logProgress !== _this14.selectedActivity.progress)) {\n                _context11.next = 9;\n                break;\n              }\n              _context11.next = 9;\n              return _this14.updateActivityProgress(_this14.selectedActivity.id, _this14.logProgress);\n            case 9:\n              _context11.next = 11;\n              return _this14.showActivityLog(_this14.selectedActivity);\n            case 11:\n              _this14.logNotes = '';\n              _context11.next = 18;\n              break;\n            case 14:\n              _context11.prev = 14;\n              _context11.t0 = _context11[\"catch\"](0);\n              console.error(\"Error adding log entry:\", _context11.t0);\n              alert(\"Failed to add log entry: \".concat(_context11.t0.message));\n            case 18:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, null, [[0, 14]]);\n      }))();\n    },\n    deleteLogEntry: function deleteLogEntry(logId) {\n      var _this15 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n        var logRef;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              _context12.prev = 0;\n              if (!(!_this15.userId || !_this15.selectedActivity || !logId)) {\n                _context12.next = 3;\n                break;\n              }\n              return _context12.abrupt(\"return\");\n            case 3:\n              logRef = doc(_this15.db, \"users\", _this15.userId, \"activities\", _this15.selectedActivity.id, \"logs\", logId);\n              _context12.next = 6;\n              return deleteDoc(logRef);\n            case 6:\n              _this15.activityLogs = _this15.activityLogs.filter(function (log) {\n                return log.id !== logId;\n              });\n              _context12.next = 13;\n              break;\n            case 9:\n              _context12.prev = 9;\n              _context12.t0 = _context12[\"catch\"](0);\n              console.error(\"Error deleting log entry:\", _context12.t0);\n              alert(\"Failed to delete log entry: \".concat(_context12.t0.message));\n            case 13:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, null, [[0, 9]]);\n      }))();\n    },\n    updateCharts: function updateCharts() {\n      if (!this.$refs.progressChart || !this.$refs.categoryChart) return;\n\n      // Destroy existing charts if they exist\n      if (this.progressChart) this.progressChart.destroy();\n      if (this.categoryChart) this.categoryChart.destroy();\n\n      // Progress Distribution Chart\n      this.progressChart = new Chart(this.$refs.progressChart, {\n        type: 'bar',\n        data: {\n          labels: ['Not Started (0%)', 'Beginning (1-20%)', 'Progressing (21-50%)', 'Almost There (51-90%)', 'Completed (91-100%)'],\n          datasets: [{\n            label: 'Number of Activities',\n            data: [this.activities.filter(function (a) {\n              return (a.progress || 0) === 0;\n            }).length, this.activities.filter(function (a) {\n              return (a.progress || 0) > 0 && (a.progress || 0) <= 20;\n            }).length, this.activities.filter(function (a) {\n              return (a.progress || 0) > 20 && (a.progress || 0) <= 50;\n            }).length, this.activities.filter(function (a) {\n              return (a.progress || 0) > 50 && (a.progress || 0) <= 90;\n            }).length, this.activities.filter(function (a) {\n              return (a.progress || 0) > 90;\n            }).length],\n            backgroundColor: ['rgba(255, 99, 132, 0.7)',\n            // Red - Not started\n            'rgba(255, 159, 64, 0.7)',\n            // Orange - Beginning\n            'rgba(255, 205, 86, 0.7)',\n            // Yellow - Progressing\n            'rgba(54, 162, 235, 0.7)',\n            // Blue - Almost there\n            'rgba(75, 192, 192, 0.7)' // Green - Completed\n            ],\n            borderColor: ['rgba(255, 99, 132, 1)', 'rgba(255, 159, 64, 1)', 'rgba(255, 205, 86, 1)', 'rgba(54, 162, 235, 1)', 'rgba(75, 192, 192, 1)'],\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'bottom'\n            },\n            tooltip: {\n              callbacks: {\n                label: function label(context) {\n                  return \"\".concat(context.parsed.y, \" activities\");\n                }\n              }\n            }\n          },\n          scales: {\n            y: {\n              beginAtZero: true,\n              title: {\n                display: true,\n                text: 'Number of Activities'\n              },\n              ticks: {\n                stepSize: 1\n              }\n            },\n            x: {\n              title: {\n                display: true,\n                text: 'Progress Stage'\n              }\n            }\n          }\n        }\n      });\n\n      // Category Chart\n      var categoryLabels = Object.keys(this.categoryDistribution);\n      var categoryValues = Object.values(this.categoryDistribution);\n      this.categoryChart = new Chart(this.$refs.categoryChart, {\n        type: 'doughnut',\n        data: {\n          labels: categoryLabels,\n          datasets: [{\n            data: categoryValues,\n            backgroundColor: ['rgba(255, 99, 132, 0.7)', 'rgba(54, 162, 235, 0.7)', 'rgba(255, 206, 86, 0.7)', 'rgba(75, 192, 192, 0.7)', 'rgba(153, 102, 255, 0.7)', 'rgba(255, 159, 64, 0.7)'],\n            borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'right'\n            }\n          }\n        }\n      });\n    }\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n    if (this.progressChart) this.progressChart.destroy();\n    if (this.timelineChart) this.timelineChart.destroy();\n    if (this.categoryChart) this.categoryChart.destroy();\n  },\n  mounted: function mounted() {\n    var _this16 = this;\n    this.db = getFirestore();\n    this.auth = getAuth();\n    this.unsubscribe = onAuthStateChanged(this.auth, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(user) {\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              if (!user) {\n                _context13.next = 6;\n                break;\n              }\n              _this16.userId = user.uid;\n              _context13.next = 4;\n              return _this16.loadActivities();\n            case 4:\n              _context13.next = 9;\n              break;\n            case 6:\n              _this16.userId = null;\n              _this16.activities = [];\n              _this16.loading = false;\n            case 9:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n};","map":{"version":3,"names":["getAuth","onAuthStateChanged","getFirestore","collection","addDoc","getDocs","getDoc","query","orderBy","serverTimestamp","doc","updateDoc","deleteDoc","where","Chart","registerables","register","apply","_toConsumableArray","name","data","unsubscribe","filterCategory","showCategoriesModal","newCategory","db","auth","userId","showAddForm","activities","loading","editingProgressId","activityProgress","progressColor","searchQuery","filterStatus","sortBy","sortField","sortDirection","showDeleteModal","activityToDelete","showLogModal","selectedActivity","activityLogs","logProgress","logNotes","currentView","expandedActivities","progressChart","categoryChart","defaultCategories","userCategories","newActivity","objective","category","customCategory","tools","done","progress","priority","deadline","notes","favorite","computed","allCategories","concat","completedActivities","filter","a","length","inProgressActivities","highPriorityActivities","overdueActivities","_this","isOverdue","filteredActivities","_this2","filtered","displayCategory","toLowerCase","includes","some","tool","sort","b","_a$startedAt","_b$startedAt","startedAt","seconds","priorityOrder","high","medium","low","Date","_b$startedAt2","_a$startedAt2","progressDistribution","distribution","forEach","activity","categoryDistribution","_this3","methods","handleCategoryChange","openCategoriesModal","addCategory","trim","push","removeCategory","index","splice","saveCategories","_this4","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userRef","wrap","_callee$","_context","prev","next","abrupt","categories","t0","console","error","alert","message","stop","resetFilters","toggleAddForm","resetForm","updateProgressColor","toggleEditProgress","activityId","find","id","updateProgress","_this5","_callee2","validProgress","activityRef","activityIndex","_callee2$","_context2","parseInt","Math","max","min","_objectSpread","completedAt","findIndex","floor","now","updateCharts","updateActivityProgress","_this6","_callee3","_callee3$","_context3","completeActivity","_this7","_callee4","_callee4$","_context4","confirmDelete","deleteActivity","_this8","_callee5","_callee5$","_context5","addTool","removeTool","formatDate","timestamp","short","arguments","undefined","date","toDate","toLocaleDateString","month","day","year","hour","minute","formatDeadline","dateString","isDeadlineApproaching","today","diffTime","diffDays","ceil","sortByField","field","submitActivity","_this9","_callee6","filteredTools","isDone","activityData","userActivitiesRef","_callee6$","_context6","currentActivityId","loadActivities","_this10","_callee7","activitiesQuery","querySnapshot","userDocRef","userDoc","_callee7$","_context7","warn","sent","docs","map","Array","isArray","Boolean","exists","code","finish","toggleFavorite","_this11","_callee8","newFavoriteStatus","_callee8$","_context8","markAsComplete","_this12","_callee9","_callee9$","_context9","editActivity","isEditing","$nextTick","_document$querySelect","document","querySelector","scrollIntoView","behavior","toggleActivityDetails","indexOf","showActivityLog","_this13","_callee10","logsRef","logsQuery","_callee10$","_context10","addLogEntry","_this14","_callee11","_callee11$","_context11","deleteLogEntry","logId","_this15","_callee12","logRef","_callee12$","_context12","log","$refs","destroy","type","labels","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","plugins","legend","position","tooltip","callbacks","context","parsed","y","scales","beginAtZero","title","display","text","ticks","stepSize","x","categoryLabels","Object","keys","categoryValues","values","beforeUnmount","timelineChart","mounted","_this16","_ref","_callee13","user","_callee13$","_context13","uid","_x"],"sources":["/workspaces/JAVASCRIPT-S4/Project Devgate-App/src/views/act.vue"],"sourcesContent":["<template>\r\n    <div class=\"activities-container\">\r\n      <div class=\"header-section\">\r\n        <h2 class=\"page-title\">My Activities</h2>\r\n        <div class=\"header-actions\">\r\n          <router-link to='/dash' class=\"back-link\">\r\n            <span class=\"back-icon\">←</span> Return to Discussions\r\n          </router-link>\r\n          <button @click=\"toggleAddForm\" class=\"add-button\">\r\n            {{ showAddForm ? 'Cancel' : 'Add Activity' }}\r\n            <span class=\"button-icon\">{{ showAddForm ? '×' : '+' }}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <transition name=\"slide-fade\">\r\n        <form v-if=\"showAddForm\" @submit.prevent=\"submitActivity\" class=\"activity-form\">\r\n          <div class=\"form-group\">\r\n            <label for=\"objective\">Objective:</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"objective\" \r\n              v-model=\"newActivity.objective\" \r\n              required \r\n              placeholder=\"What do you want to accomplish?\"\r\n              class=\"form-input\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label>Category:</label>\r\n            <div class=\"category-selector\">\r\n              <select \r\n                id=\"category\" \r\n                v-model=\"newActivity.category\"\r\n                @change=\"handleCategoryChange\"\r\n                class=\"form-input\"\r\n              >\r\n                <option value=\"\" disabled>Select a category</option>\r\n                <option v-for=\"category in allCategories\" :value=\"category\" :key=\"category\">\r\n                  {{ category }}\r\n                </option>\r\n                <option value=\"custom\">Custom Category...</option>\r\n              </select>\r\n              <input\r\n                v-if=\"newActivity.category === 'custom'\"\r\n                type=\"text\"\r\n                v-model=\"newActivity.customCategory\"\r\n                placeholder=\"Enter custom category\"\r\n                class=\"custom-category-input\"\r\n              >\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label>Tools/Technologies:</label>\r\n            <div v-for=\"(tool, index) in newActivity.tools\" :key=\"`tool-${index}`\" class=\"tool-input\">\r\n              <input \r\n                type=\"text\" \r\n                v-model=\"newActivity.tools[index]\" \r\n                :placeholder=\"`Tool ${index + 1}`\"\r\n                class=\"form-input\"\r\n              >\r\n              <button \r\n                type=\"button\" \r\n                @click=\"removeTool(index)\" \r\n                class=\"remove-tool\"\r\n                :disabled=\"newActivity.tools.length <= 1\"\r\n                :title=\"newActivity.tools.length <= 1 ? 'At least one tool is required' : 'Remove tool'\"\r\n              >×</button>\r\n            </div>\r\n            <button type=\"button\" @click=\"addTool\" class=\"add-tool\">+ Add Tool</button>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"progress\">Progress (%):</label>\r\n            <div class=\"progress-input-container\">\r\n              <input \r\n                type=\"range\" \r\n                id=\"progress\" \r\n                v-model.number=\"newActivity.progress\" \r\n                min=\"0\" \r\n                max=\"100\" \r\n                step=\"5\"\r\n                class=\"progress-slider\"\r\n                @input=\"updateProgressColor\"\r\n              >\r\n              <span \r\n                class=\"progress-value\"\r\n                :style=\"{'color': progressColor}\"\r\n              >{{ newActivity.progress }}%</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"priority\">Priority:</label>\r\n            <select id=\"priority\" v-model=\"newActivity.priority\" class=\"form-input\">\r\n              <option value=\"low\">Low</option>\r\n              <option value=\"medium\">Medium</option>\r\n              <option value=\"high\">High</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"deadline\">Deadline (optional):</label>\r\n            <input \r\n              type=\"date\" \r\n              id=\"deadline\" \r\n              v-model=\"newActivity.deadline\" \r\n              class=\"form-input\"\r\n              :min=\"new Date().toISOString().split('T')[0]\"\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"notes\">Notes (optional):</label>\r\n            <textarea\r\n              id=\"notes\"\r\n              v-model=\"newActivity.notes\"\r\n              placeholder=\"Add any additional notes...\"\r\n              class=\"form-input\"\r\n              rows=\"3\"\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <div class=\"form-actions\">\r\n            <button type=\"submit\" class=\"save-button\">\r\n              <span class=\"button-icon\">✓</span> Save Activity\r\n            </button>\r\n            <button type=\"button\" @click=\"resetForm\" class=\"reset-button\">\r\n              <span class=\"button-icon\">↻</span> Reset\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </transition>\r\n      \r\n      <div class=\"stats-container\">\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-value\">{{ completedActivities }}</div>\r\n          <div class=\"stat-label\">Completed</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-value\">{{ inProgressActivities }}</div>\r\n          <div class=\"stat-label\">In Progress</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-value\">{{ highPriorityActivities }}</div>\r\n          <div class=\"stat-label\">High Priority</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-value\">{{ overdueActivities }}</div>\r\n          <div class=\"stat-label\">Overdue</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Statistics Charts -->\r\n      <div class=\"charts-container\">\r\n        <div class=\"chart-card\">\r\n          <h3>Progress Distribution</h3>\r\n          <div class=\"chart-wrapper\">\r\n            <canvas ref=\"progressChart\"></canvas>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"chart-card\">\r\n          <h3>Category Breakdown</h3>\r\n          <div class=\"chart-wrapper\">\r\n            <canvas ref=\"categoryChart\" class=\"h\"></canvas>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- View Toggle -->\r\n      <div class=\"view-toggle\">\r\n        <button \r\n          @click=\"currentView = 'cards'\"\r\n          :class=\"{ 'active': currentView === 'cards' }\"\r\n          class=\"view-btn\"\r\n        >\r\n          <i class=\"fas fa-th-large\"></i> Card View\r\n        </button>\r\n        <button \r\n          @click=\"currentView = 'list'\"\r\n          :class=\"{ 'active': currentView === 'list' }\"\r\n          class=\"view-btn\"\r\n        >\r\n          <i class=\"fas fa-list\"></i> List View\r\n        </button>\r\n        <button \r\n          @click=\"currentView = 'table'\"\r\n          :class=\"{ 'active': currentView === 'table' }\"\r\n          class=\"view-btn\"\r\n        >\r\n          <i class=\"fas fa-table\"></i> Table View\r\n        </button>\r\n      </div>\r\n      \r\n      <div v-if=\"loading\" class=\"loading-container\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <div>Loading activities...</div>\r\n      </div>\r\n      \r\n      <!-- Card View -->\r\n      <div v-if=\"!loading && currentView === 'cards' && filteredActivities.length > 0\" class=\"activities-grid\">\r\n        <div \r\n          v-for=\"activity in filteredActivities\" \r\n          :key=\"activity.id\" \r\n          class=\"activity-card\"\r\n          :class=\"{\r\n            'completed-card': activity.progress === 100,\r\n            'priority-high': activity.priority === 'high',\r\n            'priority-medium': activity.priority === 'medium',\r\n            'priority-low': activity.priority === 'low',\r\n            'overdue-card': isOverdue(activity.deadline) && activity.progress !== 100\r\n          }\"\r\n        >\r\n          <div class=\"activity-header\">\r\n            <h4 class=\"activity-title\">{{ activity.objective || 'Untitled Activity' }}</h4>\r\n            <div class=\"activity-meta\">\r\n              <span class=\"activity-date\">{{ formatDate(activity.startedAt) }}</span>\r\n              <span \r\n                class=\"activity-priority\"\r\n                :class=\"{\r\n                  'priority-high-badge': activity.priority === 'high',\r\n                  'priority-medium-badge': activity.priority === 'medium',\r\n                  'priority-low-badge': activity.priority === 'low'\r\n                }\"\r\n              >\r\n                {{ activity.priority || 'medium' }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"activity-category\" v-if=\"displayCategory(activity)\">\r\n            <span class=\"category-label\">Category:</span>\r\n            <span class=\"category-value\">{{ displayCategory(activity) }}</span>\r\n          </div>\r\n          \r\n          <div class=\"activity-tools\" v-if=\"activity.tools && activity.tools.length > 0\">\r\n            <span class=\"tools-label\">Tools:</span>\r\n            <span \r\n              class=\"tool-tag\" \r\n              v-for=\"(tool, tIndex) in activity.tools\" \r\n              :key=\"`tag-${activity.id}-${tIndex}`\"\r\n            >\r\n              {{ tool }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"activity-progress\">\r\n            <div class=\"progress-bar-container\">\r\n              <div \r\n                class=\"progress-bar\" \r\n                :style=\"{ width: `${activity.progress || 0}%` }\"\r\n                :class=\"{ \r\n                  'progress-low': (activity.progress || 0) < 30, \r\n                  'progress-mid': (activity.progress || 0) >= 30 && (activity.progress || 0) < 70,\r\n                  'progress-high': (activity.progress || 0) >= 70 \r\n                }\"\r\n              ></div>\r\n            </div>\r\n            <div class=\"progress-text\">{{ activity.progress || 0 }}% complete</div>\r\n          </div>\r\n          \r\n          <div class=\"activity-notes\" v-if=\"activity.notes\">\r\n            <div class=\"notes-label\">Notes:</div>\r\n            <div class=\"notes-content\">{{ activity.notes }}</div>\r\n          </div>\r\n          \r\n          <div class=\"activity-footer\">\r\n            <div class=\"activity-status\">\r\n              Status: <span :class=\"{ 'status-completed': activity.progress === 100 }\">\r\n                {{ activity.progress === 100 ? 'Completed' : 'In progress' }}\r\n              </span>\r\n            </div>\r\n            <div class=\"activity-deadline\" v-if=\"activity.deadline\">\r\n              Deadline: {{ formatDeadline(activity.deadline) }}\r\n              <span \r\n                class=\"deadline-warning\" \r\n                v-if=\"isDeadlineApproaching(activity.deadline) && activity.progress !== 100\"\r\n              >\r\n                ⏰\r\n              </span>\r\n              <span \r\n                class=\"deadline-danger\" \r\n                v-if=\"isOverdue(activity.deadline) && activity.progress !== 100\"\r\n              >\r\n                ‼️\r\n              </span>\r\n            </div>\r\n            <div class=\"activity-actions\">\r\n                <button \r\n    @click=\"markAsComplete(activity.id)\" \r\n    class=\"action-btn complete\"\r\n    v-if=\"activity.progress !== 100\"\r\n    title=\"Mark as Complete\"\r\n  >\r\n    <i class=\"fas fa-check\"></i>\r\n  </button>\r\n\r\n              <button @click=\"editActivity(activity)\" class=\"action-btn edit\">\r\n                <i class=\"fas fa-edit\"></i>\r\n              </button>\r\n              <button \r\n  @click.stop=\"toggleFavorite(activity.id)\" \r\n  class=\"action-btn favorite\"\r\n  :title=\"activity.favorite ? 'Remove from favorites' : 'Add to favorites'\"\r\n>\r\n  <i :class=\"activity.favorite ? 'fas fa-star' : 'far fa-star'\"></i>\r\n</button>\r\n              <button @click=\"confirmDelete(activity.id)\" class=\"action-btn delete\">\r\n                <i class=\"fas fa-trash\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- List View -->\r\n      <div v-if=\"!loading && currentView === 'list' && filteredActivities.length > 0\" class=\"activities-list\">\r\n        <div \r\n          v-for=\"activity in filteredActivities\" \r\n          :key=\"activity.id\" \r\n          class=\"activity-item\"\r\n          :class=\"{\r\n            'completed-item': activity.progress === 100,\r\n            'priority-high-item': activity.priority === 'high',\r\n            'overdue-item': isOverdue(activity.deadline) && activity.progress !== 100\r\n          }\"\r\n          @click=\"toggleActivityDetails(activity.id)\"\r\n        >\r\n          <div class=\"item-main\">\r\n            <div class=\"item-title\">{{ activity.objective || 'Untitled Activity' }}</div>\r\n            <div class=\"item-meta\">\r\n              <span class=\"item-category\">{{ displayCategory(activity) || 'No category' }}</span>\r\n              <span class=\"item-date\">{{ formatDate(activity.startedAt, true) }}</span>\r\n            </div>\r\n            <div class=\"item-progress\">\r\n              <div class=\"progress-bar-container\">\r\n                <div \r\n                  class=\"progress-bar\" \r\n                  :style=\"{ width: `${activity.progress || 0}%` }\"\r\n                  :class=\"{ \r\n                    'progress-low': (activity.progress || 0) < 30, \r\n                    'progress-mid': (activity.progress || 0) >= 30 && (activity.progress || 0) < 70,\r\n                    'progress-high': (activity.progress || 0) >= 70 \r\n                  }\"\r\n                ></div>\r\n              </div>\r\n              <span class=\"progress-text\">{{ activity.progress || 0 }}%</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"expandedActivities.includes(activity.id)\" class=\"item-details\">\r\n            <div class=\"details-section\">\r\n              <h5>Tools & Technologies</h5>\r\n              <div class=\"tools-container\">\r\n                <span \r\n                  class=\"tool-tag\" \r\n                  v-for=\"(tool, tIndex) in activity.tools\" \r\n                  :key=\"`tag-${activity.id}-${tIndex}`\"\r\n                >\r\n                  {{ tool }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"details-section\" v-if=\"activity.notes\">\r\n              <h5>Notes</h5>\r\n              <p class=\"notes-content\">{{ activity.notes }}</p>\r\n            </div>\r\n            \r\n            <div class=\"details-section\">\r\n              <h5>Status</h5>\r\n              <div class=\"status-info\">\r\n                <span class=\"status-text\" :class=\"{ 'status-completed': activity.progress === 100 }\">\r\n                  {{ activity.progress === 100 ? 'Completed' : 'In progress' }}\r\n                </span>\r\n                <span class=\"priority-badge\" :class=\"`priority-${activity.priority || 'medium'}-badge`\">\r\n                  {{ activity.priority || 'medium' }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"details-actions\">\r\n              <button @click.stop=\"editActivity(activity)\" class=\"btn small-btn\">\r\n                <i class=\"fas fa-edit\"></i> Edit\r\n              </button>\r\n              <button \r\n                @click.stop=\"updateActivityProgress(activity.id, 100)\" \r\n                class=\"btn small-btn complete\"\r\n                v-if=\"activity.progress !== 100\"\r\n              >\r\n                <i class=\"fas fa-check\"></i> Mark Complete\r\n              </button>\r\n              <button @click.stop=\"confirmDelete(activity.id)\" class=\"btn small-btn delete\">\r\n                <i class=\"fas fa-trash\"></i> Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Table View -->\r\n      <div v-if=\"!loading && currentView === 'table'\" class=\"activities-table\">\r\n        <div class=\"table-controls\">\r\n          <div class=\"search-container\">\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"searchQuery\" \r\n              placeholder=\"Search activities...\" \r\n              class=\"search-input\"\r\n            >\r\n            <span class=\"search-icon\">🔍</span>\r\n          </div>\r\n          <div class=\"filter-container\">\r\n            <label>Filter:</label>\r\n            <select v-model=\"filterStatus\" class=\"filter-select\">\r\n              <option value=\"all\">All Activities</option>\r\n              <option value=\"completed\">Completed</option>\r\n              <option value=\"in-progress\">In Progress</option>\r\n              <option value=\"overdue\">Overdue</option>\r\n              <option value=\"favorites\">Favorites</option>\r\n            </select>\r\n            <select v-model=\"filterCategory\" class=\"filter-select\">\r\n    <option value=\"\">All Categories</option>\r\n    <option v-for=\"category in allCategories\" :value=\"category\" :key=\"'filter-'+category\">\r\n      {{ category }}\r\n    </option>\r\n  </select>\r\n          </div>\r\n          <div class=\"sort-container\">\r\n            <label>Sort by:</label>\r\n            <select v-model=\"sortBy\" class=\"sort-select\">\r\n              <option value=\"date-desc\">Newest First</option>\r\n              <option value=\"date-asc\">Oldest First</option>\r\n              <option value=\"progress-asc\">Progress (Low to High)</option>\r\n              <option value=\"progress-desc\">Progress (High to Low)</option>\r\n              <option value=\"priority\">Priority</option>\r\n              <option value=\"deadline\">Deadline</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <!-- Empty state when no results -->\r\n  <div v-if=\"filteredActivities.length === 0\" class=\"empty-table-state\">\r\n    <p>No activities found matching your criteria.</p>\r\n    <button @click=\"resetFilters\" class=\"reset-filters-btn\">\r\n      Reset Filters\r\n    </button>\r\n  </div>\r\n        \r\n        <table v-if = \"filteredActivities.length>0\">\r\n          <thead>\r\n            <tr>\r\n              <th @click=\"sortByField('objective')\">\r\n                Objective\r\n                <span class=\"sort-icon\" v-if=\"sortField === 'objective'\">\r\n                  {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n                </span>\r\n              </th>\r\n              <th @click=\"sortByField('category')\">\r\n                Category\r\n                <span class=\"sort-icon\" v-if=\"sortField === 'category'\">\r\n                  {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n                </span>\r\n              </th>\r\n              <th @click=\"sortByField('progress')\">\r\n                Progress\r\n                <span class=\"sort-icon\" v-if=\"sortField === 'progress'\">\r\n                  {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n                </span>\r\n              </th>\r\n              <th @click=\"sortByField('priority')\">\r\n                Priority\r\n                <span class=\"sort-icon\" v-if=\"sortField === 'priority'\">\r\n                  {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n                </span>\r\n              </th>\r\n              <th @click=\"sortByField('startedAt')\">\r\n                Started\r\n                <span class=\"sort-icon\" v-if=\"sortField === 'startedAt'\">\r\n                  {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n                </span>\r\n              </th>\r\n              <th @click=\"sortByField('deadline')\">\r\n                Deadline\r\n                <span class=\"sort-icon\" v-if=\"sortField === 'deadline'\">\r\n                  {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n                </span>\r\n              </th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr \r\n              v-for=\"activity in filteredActivities\" \r\n              :key=\"activity.id\"\r\n              :class=\"{\r\n                'completed-row': activity.progress === 100,\r\n                'priority-high-row': activity.priority === 'high',\r\n                'overdue-row': isOverdue(activity.deadline) && activity.progress !== 100\r\n              }\"\r\n            >\r\n              <td>\r\n                <div class=\"activity-title\">\r\n                  {{ activity.objective || 'Untitled Activity' }}\r\n                  <span v-if=\"activity.favorite\" class=\"favorite-star\">★</span>\r\n                </div>\r\n                <div class=\"activity-tools\" v-if=\"activity.tools && activity.tools.length > 0\">\r\n                  <span \r\n                    class=\"tool-tag\" \r\n                    v-for=\"(tool, tIndex) in activity.tools\" \r\n                    :key=\"`tag-${activity.id}-${tIndex}`\"\r\n                  >\r\n                    {{ tool }}\r\n                  </span>\r\n                </div>\r\n              </td>\r\n              <td>{{ displayCategory(activity) || '—' }}</td>\r\n              <td>\r\n                <div class=\"progress-cell\">\r\n                  <div class=\"progress-bar-container\">\r\n                    <div \r\n                      class=\"progress-bar\" \r\n                      :style=\"{ width: `${activity.progress || 0}%` }\"\r\n                      :class=\"{ \r\n                        'progress-low': (activity.progress || 0) < 30, \r\n                        'progress-mid': (activity.progress || 0) >= 30 && (activity.progress || 0) < 70,\r\n                        'progress-high': (activity.progress || 0) >= 70 \r\n                      }\"\r\n                    ></div>\r\n                  </div>\r\n                  <span class=\"progress-text\">{{ activity.progress || 0 }}%</span>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <span class=\"priority-badge\" :class=\"`priority-${activity.priority || 'medium'}-badge`\">\r\n                  {{ activity.priority || 'medium' }}\r\n                </span>\r\n              </td>\r\n              <td>{{ formatDate(activity.startedAt, true) }}</td>\r\n              <td>\r\n                <div class=\"deadline-cell\" :class=\"{ 'overdue': isOverdue(activity.deadline) && activity.progress !== 100 }\">\r\n                  {{ activity.deadline ? formatDeadline(activity.deadline) : '—' }}\r\n                  <span \r\n                    v-if=\"isDeadlineApproaching(activity.deadline) && activity.progress !== 100\"\r\n                    class=\"deadline-warning\"\r\n                  >\r\n                    ⏰\r\n                  </span>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"table-actions\">\r\n                <button \r\n      @click.stop=\"markAsComplete(activity.id)\" \r\n      class=\"action-btn complete\"\r\n      v-if=\"activity.progress !== 100\"\r\n      title=\"Mark as Complete\"\r\n    >\r\n      <i class=\"fas fa-check\"></i>\r\n    </button>\r\n                  <button @click.stop=\"editActivity(activity)\" class=\"action-btn edit\">\r\n                    <i class=\"fas fa-edit\"></i>\r\n                  </button>\r\n                  <button \r\n  @click.stop=\"toggleFavorite(activity.id)\" \r\n  class=\"action-btn favorite\"\r\n  :title=\"activity.favorite ? 'Remove from favorites' : 'Add to favorites'\"\r\n>\r\n  <i :class=\"activity.favorite ? 'fas fa-star' : 'far fa-star'\"></i>\r\n</button>\r\n                  <button @click.stop=\"confirmDelete(activity.id)\" class=\"action-btn delete\">\r\n                    <i class=\"fas fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      \r\n      <div v-if=\"!loading && activities.length === 0\" class=\"empty-state\">\r\n        <div class=\"empty-icon\">📊</div>\r\n        <h3>No activities yet</h3>\r\n        <p>Start by adding your first activity to track your progress!</p>\r\n        <button @click=\"toggleAddForm\" class=\"cta-button\">\r\n          Add Your First Activity\r\n        </button>\r\n      </div>\r\n  \r\n      <!-- Delete Confirmation Modal -->\r\n      <div v-if=\"showDeleteModal\" class=\"modal-overlay\">\r\n        <div class=\"modal-container\">\r\n          <div class=\"modal-header\">\r\n            <h3>Confirm Deletion</h3>\r\n            <button @click=\"showDeleteModal = false\" class=\"modal-close\">×</button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p>Are you sure you want to delete this activity? This action cannot be undone.</p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button @click=\"showDeleteModal = false\" class=\"modal-cancel\">Cancel</button>\r\n            <button @click=\"deleteActivity\" class=\"modal-confirm\">Delete</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Activity Log Modal -->\r\n      <div v-if=\"showLogModal\" class=\"modal-overlay\">\r\n        <div class=\"modal-container large-modal\">\r\n          <div class=\"modal-header\">\r\n            <h3>Activity Log: {{ selectedActivity?.objective || 'Untitled Activity' }}</h3>\r\n            <button @click=\"showLogModal = false\" class=\"modal-close\">×</button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"log-container\">\r\n              <div class=\"log-form\">\r\n                <h4>Add Log Entry</h4>\r\n                <div class=\"form-group\">\r\n                  <label>Progress Update:</label>\r\n                  <input \r\n                    type=\"range\" \r\n                    v-model.number=\"logProgress\" \r\n                    min=\"0\" \r\n                    max=\"100\" \r\n                    step=\"5\"\r\n                    class=\"progress-slider\"\r\n                  >\r\n                  <span class=\"progress-value\">{{ logProgress }}%</span>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label>Notes:</label>\r\n                  <textarea v-model=\"logNotes\" placeholder=\"Describe what you accomplished...\" rows=\"3\"></textarea>\r\n                </div>\r\n                <button @click=\"addLogEntry\" class=\"btn primary-btn\">Add Entry</button>\r\n              </div>\r\n              \r\n              <div class=\"log-entries\">\r\n                <h4>History</h4>\r\n                <div v-if=\"activityLogs.length === 0\" class=\"empty-logs\">\r\n                  No log entries yet\r\n                </div>\r\n                <div \r\n                  v-for=\"(log, index) in activityLogs\" \r\n                  :key=\"index\"\r\n                  class=\"log-entry\"\r\n                >\r\n                  <div class=\"log-header\">\r\n                    <span class=\"log-date\">{{ formatDate(log.timestamp) }}</span>\r\n                    <span class=\"log-progress\">{{ log.progress }}%</span>\r\n                  </div>\r\n                  <div class=\"log-content\" v-if=\"log.notes\">{{ log.notes }}</div>\r\n                  <button @click=\"deleteLogEntry(log.id)\" class=\"log-delete\">×</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n  import { \r\n    getFirestore, \r\n    collection, \r\n    addDoc, \r\n    getDocs,\r\n    getDoc, \r\n    query, \r\n    orderBy, \r\n    serverTimestamp, \r\n    doc, \r\n    updateDoc,\r\n    deleteDoc,\r\n    where\r\n  } from \"firebase/firestore\";\r\n  import { Chart, registerables } from 'chart.js';\r\n  Chart.register(...registerables);\r\n  import '@fortawesome/fontawesome-free/css/all.min.css'\r\n  export default {\r\n    name: 'EnhancedActivitiesPage',\r\n    \r\n    data() {\r\n      return {\r\n        unsubscribe : null,\r\n        filterCategory: '',\r\n        showCategoriesModal: false,\r\n        newCategory: '',\r\n        db: null,\r\n        auth: null,\r\n        userId: null,\r\n        showAddForm: false,\r\n        activities: [],\r\n        loading: true,\r\n        editingProgressId: null,\r\n        activityProgress: 0,\r\n        progressColor: '#4a89dc',\r\n        searchQuery: '',\r\n        filterStatus: 'all',\r\n        sortBy: 'date-desc',\r\n        sortField: 'date',\r\n        sortDirection: 'desc',\r\n        showDeleteModal: false,\r\n        activityToDelete: null,\r\n        showLogModal: false,\r\n        selectedActivity: null,\r\n        activityLogs: [],\r\n        logProgress: 0,\r\n        logNotes: '',\r\n        currentView: 'cards', // 'cards', 'list', 'table'\r\n        expandedActivities: [],\r\n        progressChart: null,\r\n        categoryChart: null,\r\n        defaultCategories: [\r\n          'Learning', 'Project', 'Work', 'Personal', \r\n          'Health', 'Finance', 'Creative', 'Other'\r\n        ],\r\n        userCategories: [],\r\n        newActivity: {\r\n          objective: \"\",\r\n          category: \"\",\r\n          customCategory: \"\",\r\n          tools: [\"\"],\r\n          done: false,\r\n          progress: 0,\r\n          priority: \"medium\",\r\n          deadline: \"\",\r\n          notes: \"\",\r\n          favorite: false\r\n        }\r\n      };\r\n    },\r\n    \r\n    computed: {\r\n      allCategories() {\r\n        return [...this.defaultCategories, ...this.userCategories];\r\n      },\r\n      \r\n      completedActivities() {\r\n        return this.activities.filter(a => a.progress === 100).length;\r\n      },\r\n      \r\n      inProgressActivities() {\r\n        return this.activities.filter(a => a.progress < 100).length;\r\n      },\r\n      \r\n      highPriorityActivities() {\r\n        return this.activities.filter(a => a.priority === 'high').length;\r\n      },\r\n      \r\n      overdueActivities() {\r\n        return this.activities.filter(a => this.isOverdue(a.deadline) && a.progress !== 100).length;\r\n      },\r\n      \r\n      filteredActivities() {\r\n        let filtered = [...this.activities];\r\n        \r\n        // Apply status filter\r\n        switch (this.filterStatus) {\r\n          case 'completed':\r\n            filtered = filtered.filter(a => a.progress === 100);\r\n            break;\r\n          case 'in-progress':\r\n            filtered = filtered.filter(a => a.progress < 100);\r\n            break;\r\n          case 'overdue':\r\n            filtered = filtered.filter(a => this.isOverdue(a.deadline) && a.progress !== 100);\r\n            break;\r\n          case 'favorites':\r\n            filtered = filtered.filter(a => a.favorite);\r\n            break;\r\n        }\r\n        if (this.filterCategory) {\r\n    filtered = filtered.filter(a => \r\n      this.displayCategory(a) === this.filterCategory\r\n    );\r\n  }\r\n    // Apply search filter\r\n        if (this.searchQuery) {\r\n    const query = this.searchQuery.toLowerCase();\r\n    filtered = filtered.filter(a => \r\n      a.objective.toLowerCase().includes(query) || \r\n      (a.tools && a.tools.some(tool => tool.toLowerCase().includes(query))) ||\r\n      (a.notes && a.notes.toLowerCase().includes(query)) ||\r\n      this.displayCategory(a).toLowerCase().includes(query)\r\n    );\r\n  }\r\n        // Apply sorting\r\n        switch (this.sortBy) {\r\n          case 'date-asc':\r\n            filtered.sort((a, b) => (a.startedAt?.seconds || 0) - (b.startedAt?.seconds || 0));\r\n            break;\r\n          case 'progress-asc':\r\n            filtered.sort((a, b) => (a.progress || 0) - (b.progress || 0));\r\n            break;\r\n          case 'progress-desc':\r\n            filtered.sort((a, b) => (b.progress || 0) - (a.progress || 0));\r\n            break;\r\n          case 'priority':\r\n            const priorityOrder = { high: 3, medium: 2, low: 1 };\r\n            filtered.sort((a, b) => priorityOrder[b.priority || 'medium'] - priorityOrder[a.priority || 'medium']);\r\n            break;\r\n          case 'deadline':\r\n            filtered.sort((a, b) => {\r\n              if (!a.deadline && !b.deadline) return 0;\r\n              if (!a.deadline) return 1;\r\n              if (!b.deadline) return -1;\r\n              return new Date(a.deadline) - new Date(b.deadline);\r\n            });\r\n            break;\r\n          default: // date-desc\r\n            filtered.sort((a, b) => (b.startedAt?.seconds || 0) - (a.startedAt?.seconds || 0));\r\n        }\r\n        \r\n        return filtered;\r\n      },\r\n      \r\n      progressDistribution() {\r\n        const distribution = {\r\n          '0-20%': 0,\r\n          '21-40%': 0,\r\n          '41-60%': 0,\r\n          '61-80%': 0,\r\n          '81-100%': 0\r\n        };\r\n        \r\n        this.activities.forEach(activity => {\r\n          const progress = activity.progress || 0;\r\n          if (progress <= 20) {\r\n            distribution['0-20%']++;\r\n          } else if (progress <= 40) {\r\n            distribution['21-40%']++;\r\n          } else if (progress <= 60) {\r\n            distribution['41-60%']++;\r\n          } else if (progress <= 80) {\r\n            distribution['61-80%']++;\r\n          } else {\r\n            distribution['81-100%']++;\r\n          }\r\n        });\r\n        \r\n        return distribution;\r\n      },\r\n      \r\n      categoryDistribution() {\r\n        const distribution = {};\r\n        \r\n        this.activities.forEach(activity => {\r\n          const category = this.displayCategory(activity) || 'Uncategorized';\r\n          distribution[category] = (distribution[category] || 0) + 1;\r\n        });\r\n        \r\n        return distribution;\r\n      },\r\n      \r\n      \r\n    },\r\n    \r\n    methods: {\r\n    handleCategoryChange() {\r\n  if (this.newActivity.category === 'custom') {\r\n    this.openCategoriesModal();\r\n    this.newActivity.customCategory = '';\r\n  }\r\n},\r\n    openCategoriesModal() {\r\n    this.showCategoriesModal = true;\r\n    this.newCategory = '';\r\n  },\r\n  \r\n  addCategory() {\r\n    if (this.newCategory.trim() && !this.userCategories.includes(this.newCategory.trim())) {\r\n      this.userCategories.push(this.newCategory.trim());\r\n      this.newCategory = '';\r\n    }\r\n  },\r\n  \r\n  removeCategory(index) {\r\n    this.userCategories.splice(index, 1);\r\n  },\r\n  \r\n  async saveCategories() {\r\n    try {\r\n      if (!this.userId) return;\r\n      \r\n      const userRef = doc(this.db, \"users\", this.userId);\r\n      await updateDoc(userRef, {\r\n        categories: this.userCategories\r\n      });\r\n      \r\n      this.showCategoriesModal = false;\r\n    } catch (error) {\r\n      console.error(\"Error saving categories:\", error);\r\n      alert(`Failed to save categories: ${error.message}`);\r\n    }\r\n  },\r\n    resetFilters() {\r\n  this.searchQuery = '';\r\n  this.filterStatus = 'all';\r\n  this.sortBy = 'date-desc';\r\n},\r\n      displayCategory(activity) {\r\n        return activity.customCategory || activity.category || '';\r\n      },\r\n      \r\n      toggleAddForm() {\r\n        this.showAddForm = !this.showAddForm;\r\n        if (!this.showAddForm) {\r\n          this.resetForm();\r\n        }\r\n      },\r\n      \r\n      updateProgressColor() {\r\n        const progress = this.newActivity.progress;\r\n        if (progress < 30) {\r\n          this.progressColor = '#ff9800';\r\n        } else if (progress < 70) {\r\n          this.progressColor = '#2196f3';\r\n        } else {\r\n          this.progressColor = '#4caf50';\r\n        }\r\n      },\r\n      \r\n      toggleEditProgress(activityId) {\r\n        if (this.editingProgressId === activityId) {\r\n          this.editingProgressId = null;\r\n        } else {\r\n          const activity = this.activities.find(a => a.id === activityId);\r\n          if (activity) {\r\n            this.activityProgress = activity.progress || 0;\r\n            this.editingProgressId = activityId;\r\n          }\r\n        }\r\n      },\r\n      \r\n      async updateProgress(activityId) {\r\n        try {\r\n          if (!this.userId || !activityId) return;\r\n          \r\n          const progress = parseInt(this.activityProgress) || 0;\r\n          const validProgress = Math.max(0, Math.min(100, progress));\r\n          \r\n          const activityRef = doc(this.db, \"users\", this.userId, \"activities\", activityId);\r\n          \r\n          await updateDoc(activityRef, {\r\n            progress: validProgress,\r\n            done: validProgress === 100,\r\n            ...(validProgress === 100 ? { completedAt: serverTimestamp() } : {})\r\n          });\r\n          \r\n          const activityIndex = this.activities.findIndex(a => a.id === activityId);\r\n          if (activityIndex !== -1) {\r\n            this.activities[activityIndex].progress = validProgress;\r\n            this.activities[activityIndex].done = validProgress === 100;\r\n            if (validProgress === 100) {\r\n              this.activities[activityIndex].completedAt = { seconds: Math.floor(Date.now() / 1000) };\r\n            }\r\n          }\r\n          \r\n          this.editingProgressId = null;\r\n          this.updateCharts();\r\n        } catch (error) {\r\n          console.error(\"Error updating progress:\", error);\r\n          alert(`Failed to update progress: ${error.message}`);\r\n        }\r\n      },\r\n      \r\n      async updateActivityProgress(activityId, progress) {\r\n        this.activityProgress = progress;\r\n        await this.updateProgress(activityId);\r\n      },\r\n      \r\n      async completeActivity(activityId) {\r\n        this.activityProgress = 100;\r\n        await this.updateProgress(activityId);\r\n      },\r\n      \r\n      confirmDelete(activityId) {\r\n        this.activityToDelete = activityId;\r\n        this.showDeleteModal = true;\r\n      },\r\n      \r\n      async deleteActivity() {\r\n        try {\r\n          if (!this.userId || !this.activityToDelete) return;\r\n          \r\n          const activityRef = doc(this.db, \"users\", this.userId, \"activities\", this.activityToDelete);\r\n          await deleteDoc(activityRef);\r\n          \r\n          this.activities = this.activities.filter(a => a.id !== this.activityToDelete);\r\n          this.showDeleteModal = false;\r\n          this.activityToDelete = null;\r\n          this.updateCharts();\r\n        } catch (error) {\r\n          console.error(\"Error deleting activity:\", error);\r\n          alert(`Failed to delete activity: ${error.message}`);\r\n        }\r\n      },\r\n      \r\n      addTool() {\r\n        this.newActivity.tools.push(\"\");\r\n      },\r\n      \r\n      removeTool(index) {\r\n        this.newActivity.tools.splice(index, 1);\r\n        if (this.newActivity.tools.length === 0) {\r\n          this.newActivity.tools.push(\"\");\r\n        }\r\n      },\r\n      \r\n      resetForm() {\r\n        this.newActivity = {\r\n          objective: \"\",\r\n          category: \"\",\r\n          customCategory: \"\",\r\n          tools: [\"\"],\r\n          done: false,\r\n          progress: 0,\r\n          priority: \"medium\",\r\n          deadline: \"\",\r\n          notes: \"\",\r\n          favorite: false\r\n        };\r\n        this.progressColor = '#4a89dc';\r\n      },\r\n      \r\n      formatDate(timestamp, short = false) {\r\n        if (!timestamp) return 'N/A';\r\n        try {\r\n          const date = timestamp.toDate();\r\n          if (short) {\r\n            return date.toLocaleDateString('en-US', { \r\n              month: 'short', \r\n              day: 'numeric'\r\n            });\r\n          }\r\n          return date.toLocaleDateString('en-US', { \r\n            year: 'numeric', \r\n            month: 'short', \r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Date formatting error:\", error);\r\n          return 'Invalid date';\r\n        }\r\n      },\r\n      \r\n      formatDeadline(dateString) {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('en-US', { \r\n          year: 'numeric', \r\n          month: 'short', \r\n          day: 'numeric'\r\n        });\r\n      },\r\n      \r\n      isDeadlineApproaching(dateString) {\r\n        if (!dateString) return false;\r\n        const deadline = new Date(dateString);\r\n        const today = new Date();\r\n        const diffTime = deadline - today;\r\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n        return diffDays <= 3 && diffDays >= 0;\r\n      },\r\n      \r\n      isOverdue(dateString) {\r\n        if (!dateString) return false;\r\n        const deadline = new Date(dateString);\r\n        const today = new Date();\r\n        return deadline < today;\r\n      },\r\n      \r\n      sortByField(field) {\r\n        if (this.sortField === field) {\r\n          this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n          this.sortField = field;\r\n          this.sortDirection = 'desc';\r\n        }\r\n        this.sortBy = `${field}-${this.sortDirection}`;\r\n      },\r\n      \r\n      async submitActivity() {\r\n        try {\r\n          if (!this.userId || this.userId.trim() === \"\") {\r\n            alert(\"You must be logged in to add activities. Please login and try again.\");\r\n            return;\r\n          }\r\n          // Validate and prepare data\r\n    const filteredTools = this.newActivity.tools.filter(tool => tool && tool.trim() !== \"\");\r\n    const progress = parseInt(this.newActivity.progress) || 0;\r\n    const validProgress = Math.max(0, Math.min(100, progress));\r\n    const isDone = validProgress === 100;\r\n\r\n    const activityData = {\r\n      objective: (this.newActivity.objective || \"\").trim(),\r\n      category: this.newActivity.category === 'custom' ? '' : this.newActivity.category,\r\n      customCategory: this.newActivity.category === 'custom' ? this.newActivity.customCategory : '',\r\n      tools: filteredTools || [],\r\n      done: isDone,\r\n      progress: validProgress,\r\n      priority: this.newActivity.priority || 'medium',\r\n      notes: this.newActivity.notes || '',\r\n      favorite: this.newActivity.favorite || false\r\n    };\r\n\r\n    // Add deadline if provided\r\n    if (this.newActivity.deadline) {\r\n      activityData.deadline = this.newActivity.deadline;\r\n    }\r\n\r\n    // If editing existing activity\r\n    if (this.currentActivityId) {\r\n      const activityRef = doc(this.db, \"users\", this.userId, \"activities\", this.currentActivityId);\r\n      await updateDoc(activityRef, activityData);\r\n      \r\n      // Update local state\r\n      const index = this.activities.findIndex(a => a.id === this.currentActivityId);\r\n      if (index !== -1) {\r\n        this.activities[index] = {\r\n          ...this.activities[index],\r\n          ...activityData\r\n        };\r\n      }\r\n    } \r\n    // If adding new activity\r\n    else {\r\n      activityData.startedAt = serverTimestamp();\r\n      if (isDone) {\r\n        activityData.completedAt = serverTimestamp();\r\n      }\r\n      \r\n      const userActivitiesRef = collection(this.db, \"users\", this.userId, \"activities\");\r\n      await addDoc(userActivitiesRef, activityData);\r\n    }\r\n\r\n    await this.loadActivities();\r\n    this.resetForm();\r\n    this.showAddForm = false;\r\n    this.currentActivityId = null;\r\n  } catch (error) {\r\n    console.error(\"Error saving activity:\", error);\r\n    alert(`Failed to save activity: ${error.message}`);\r\n  }\r\n},\r\n      \r\n      async loadActivities() {\r\n        if (!this.userId) {\r\n          console.warn(\"Cannot load activities: No user ID available\");\r\n          this.loading = false;\r\n          this.activities = [];\r\n          return;\r\n        }\r\n        \r\n        this.loading = true;\r\n        try {\r\n          const userActivitiesRef = collection(this.db, \"users\", this.userId, \"activities\");\r\n          const activitiesQuery = query(userActivitiesRef, orderBy(\"startedAt\", \"desc\"));\r\n          const querySnapshot = await getDocs(activitiesQuery);\r\n          \r\n          this.activities = querySnapshot.docs.map(doc => {\r\n            const data = doc.data();\r\n            const progress = parseInt(data.progress) || 0;\r\n            \r\n            return {\r\n              id: doc.id,\r\n              objective: data.objective || \"Untitled Activity\",\r\n              category: data.category || '',\r\n              customCategory: data.customCategory || '',\r\n              tools: Array.isArray(data.tools) ? data.tools : [],\r\n              done: progress === 100 ? true : Boolean(data.done),\r\n              startedAt: data.startedAt || null,\r\n              completedAt: data.completedAt || null,\r\n              userId: data.userId || this.userId,\r\n              progress: progress,\r\n              priority: data.priority || 'medium',\r\n              deadline: data.deadline || null,\r\n              notes: data.notes || '',\r\n              favorite: data.favorite || false\r\n            };\r\n          });\r\n          \r\n          // Load user categories if they exist\r\n          const userDocRef = doc(this.db, \"users\", this.userId);\r\n          const userDoc = await getDoc(userDocRef);\r\n          if (userDoc.exists() && userDoc.data().categories) {\r\n            this.userCategories = userDoc.data().categories;\r\n          }\r\n          \r\n          this.updateCharts();\r\n        } catch (error) {\r\n          console.error(\"Error loading activities:\", error);\r\n          if (error.code === 'permission-denied') {\r\n            alert(\"Permission denied. You may not have access to view these activities.\");\r\n          } else {\r\n            alert(`Failed to load activities: ${error.message}`);\r\n          }\r\n          this.activities = [];\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      \r\n      async toggleFavorite(activityId) {\r\n        try {\r\n          if (!this.userId || !activityId) return;\r\n          \r\n          const activity = this.activities.find(a => a.id === activityId);\r\n          if (!activity) return;\r\n          \r\n          const newFavoriteStatus = !activity.favorite;\r\n          const activityRef = doc(this.db, \"users\", this.userId, \"activities\", activityId);\r\n          \r\n          await updateDoc(activityRef, {\r\n            favorite: newFavoriteStatus\r\n          });\r\n          \r\n          activity.favorite = newFavoriteStatus;\r\n        } catch (error) {\r\n          console.error(\"Error toggling favorite:\", error);\r\n          alert(`Failed to update favorite status: ${error.message}`);\r\n        }\r\n      },\r\n      async markAsComplete(activityId) {\r\n  try {\r\n    if (!this.userId || !activityId) return;\r\n    \r\n    const activityRef = doc(this.db, \"users\", this.userId, \"activities\", activityId);\r\n    \r\n    await updateDoc(activityRef, {\r\n      progress: 100,\r\n      done: true,\r\n      completedAt: serverTimestamp()\r\n    });\r\n    \r\n    // Update local state\r\n    const activity = this.activities.find(a => a.id === activityId);\r\n    if (activity) {\r\n      activity.progress = 100;\r\n      activity.done = true;\r\n      activity.completedAt = { seconds: Math.floor(Date.now() / 1000) };\r\n    }\r\n    \r\n    this.updateCharts();\r\n  } catch (error) {\r\n    console.error(\"Error marking as complete:\", error);\r\n    alert(`Failed to mark as complete: ${error.message}`);\r\n  }\r\n},\r\n      \r\n      editActivity(activity) {\r\n        this.newActivity = { \r\n          objective: activity.objective,\r\n          category: activity.customCategory ? 'custom' : activity.category || '',\r\n          customCategory: activity.customCategory || '',\r\n          tools: [...(activity.tools || [])],\r\n          progress: activity.progress || 0,\r\n          priority: activity.priority || 'medium',\r\n          deadline: activity.deadline || '',\r\n          notes: activity.notes || '',\r\n          favorite: activity.favorite || false\r\n        };\r\n        \r\n        this.currentActivityId = activity.id;\r\n        this.isEditing = true;\r\n        this.showAddForm = true;\r\n        \r\n        // Scroll to form\r\n        this.$nextTick(() => {\r\n          document.querySelector('.activity-form')?.scrollIntoView({ behavior: 'smooth' });\r\n        });\r\n      },\r\n      \r\n      toggleActivityDetails(activityId) {\r\n        const index = this.expandedActivities.indexOf(activityId);\r\n        if (index === -1) {\r\n          this.expandedActivities.push(activityId);\r\n        } else {\r\n          this.expandedActivities.splice(index, 1);\r\n        }\r\n      },\r\n      \r\n      async showActivityLog(activity) {\r\n        this.selectedActivity = activity;\r\n        this.logProgress = activity.progress || 0;\r\n        this.logNotes = '';\r\n        this.showLogModal = true;\r\n        \r\n        try {\r\n          const logsRef = collection(this.db, \"users\", this.userId, \"activities\", activity.id, \"logs\");\r\n          const logsQuery = query(logsRef, orderBy(\"timestamp\", \"desc\"));\r\n          const querySnapshot = await getDocs(logsQuery);\r\n          \r\n          this.activityLogs = querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data()\r\n          }));\r\n        } catch (error) {\r\n          console.error(\"Error loading activity logs:\", error);\r\n          this.activityLogs = [];\r\n        }\r\n      },\r\n      \r\n      async addLogEntry() {\r\n        try {\r\n          if (!this.userId || !this.selectedActivity) return;\r\n          \r\n          const logsRef = collection(this.db, \"users\", this.userId, \"activities\", this.selectedActivity.id, \"logs\");\r\n          \r\n          await addDoc(logsRef, {\r\n            progress: this.logProgress,\r\n            notes: this.logNotes,\r\n            timestamp: serverTimestamp()\r\n          });\r\n          \r\n          // Update activity progress if changed\r\n          if (this.logProgress !== this.selectedActivity.progress) {\r\n            await this.updateActivityProgress(this.selectedActivity.id, this.logProgress);\r\n          }\r\n          \r\n          // Reload logs\r\n          await this.showActivityLog(this.selectedActivity);\r\n          this.logNotes = '';\r\n        } catch (error) {\r\n          console.error(\"Error adding log entry:\", error);\r\n          alert(`Failed to add log entry: ${error.message}`);\r\n        }\r\n      },\r\n      \r\n      async deleteLogEntry(logId) {\r\n        try {\r\n          if (!this.userId || !this.selectedActivity || !logId) return;\r\n          \r\n          const logRef = doc(this.db, \"users\", this.userId, \"activities\", this.selectedActivity.id, \"logs\", logId);\r\n          await deleteDoc(logRef);\r\n          \r\n          this.activityLogs = this.activityLogs.filter(log => log.id !== logId);\r\n        } catch (error) {\r\n          console.error(\"Error deleting log entry:\", error);\r\n          alert(`Failed to delete log entry: ${error.message}`);\r\n        }\r\n      },\r\n      \r\n      updateCharts() {\r\n        if (!this.$refs.progressChart || !this.$refs.categoryChart) return;\r\n        \r\n        // Destroy existing charts if they exist\r\n        if (this.progressChart) this.progressChart.destroy();\r\n        if (this.categoryChart) this.categoryChart.destroy();\r\n        \r\n        // Progress Distribution Chart\r\n        this.progressChart = new Chart(this.$refs.progressChart, {\r\n    type: 'bar',\r\n    data: {\r\n      labels: ['Not Started (0%)', 'Beginning (1-20%)', 'Progressing (21-50%)', 'Almost There (51-90%)', 'Completed (91-100%)'],\r\n      datasets: [{\r\n        label: 'Number of Activities',\r\n        data: [\r\n          this.activities.filter(a => (a.progress || 0) === 0).length,\r\n          this.activities.filter(a => (a.progress || 0) > 0 && (a.progress || 0) <= 20).length,\r\n          this.activities.filter(a => (a.progress || 0) > 20 && (a.progress || 0) <= 50).length,\r\n          this.activities.filter(a => (a.progress || 0) > 50 && (a.progress || 0) <= 90).length,\r\n          this.activities.filter(a => (a.progress || 0) > 90).length\r\n        ],\r\n        backgroundColor: [\r\n          'rgba(255, 99, 132, 0.7)',    // Red - Not started\r\n          'rgba(255, 159, 64, 0.7)',    // Orange - Beginning\r\n          'rgba(255, 205, 86, 0.7)',    // Yellow - Progressing\r\n          'rgba(54, 162, 235, 0.7)',   // Blue - Almost there\r\n          'rgba(75, 192, 192, 0.7)'    // Green - Completed\r\n        ],\r\n        borderColor: [\r\n          'rgba(255, 99, 132, 1)',\r\n          'rgba(255, 159, 64, 1)',\r\n          'rgba(255, 205, 86, 1)',\r\n          'rgba(54, 162, 235, 1)',\r\n          'rgba(75, 192, 192, 1)'\r\n        ],\r\n        borderWidth: 1\r\n      }]\r\n    },\r\n    options: {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n\r\n      plugins: {\r\n        legend: {\r\n          position : 'bottom'\r\n        },\r\n        tooltip: {\r\n          callbacks: {\r\n            label: function(context) {\r\n              return `${context.parsed.y} activities`;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      scales: {\r\n        y: {\r\n          beginAtZero: true,\r\n          title: {\r\n            display: true,\r\n            text: 'Number of Activities'\r\n          },\r\n          ticks: {\r\n            stepSize: 1\r\n          }\r\n        },\r\n        x: {\r\n          title: {\r\n            display: true,\r\n            text: 'Progress Stage'\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n        \r\n        \r\n        // Category Chart\r\n        const categoryLabels = Object.keys(this.categoryDistribution);\r\n        const categoryValues = Object.values(this.categoryDistribution);\r\n        \r\n        this.categoryChart = new Chart(this.$refs.categoryChart, {\r\n          type: 'doughnut',\r\n          data: {\r\n            labels: categoryLabels,\r\n            datasets: [{\r\n              data: categoryValues,\r\n              backgroundColor: [\r\n                'rgba(255, 99, 132, 0.7)',\r\n                'rgba(54, 162, 235, 0.7)',\r\n                'rgba(255, 206, 86, 0.7)',\r\n                'rgba(75, 192, 192, 0.7)',\r\n                'rgba(153, 102, 255, 0.7)',\r\n                'rgba(255, 159, 64, 0.7)'\r\n              ],\r\n              borderColor: [\r\n                'rgba(255, 99, 132, 1)',\r\n                'rgba(54, 162, 235, 1)',\r\n                'rgba(255, 206, 86, 1)',\r\n                'rgba(75, 192, 192, 1)',\r\n                'rgba(153, 102, 255, 1)',\r\n                'rgba(255, 159, 64, 1)'\r\n              ],\r\n              borderWidth: 1\r\n            }]\r\n          },\r\n          options: {\r\n            responsive: true,\r\n                        maintainAspectRatio: false,\r\n\r\n            plugins: {\r\n              legend: {\r\n                position: 'right'\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n     \r\n    beforeUnmount() {\r\n      if (this.unsubscribe) {\r\n      this.unsubscribe();\r\n    }\r\n  if (this.progressChart) this.progressChart.destroy();\r\n  if (this.timelineChart) this.timelineChart.destroy();\r\n  if (this.categoryChart) this.categoryChart.destroy();\r\n},\r\n    mounted() {\r\n      this.db = getFirestore();\r\n      this.auth = getAuth();\r\n      \r\n       this.unsubscribe = onAuthStateChanged(this.auth, async (user) => {\r\n        if (user) {\r\n          this.userId = user.uid;\r\n          await this.loadActivities();\r\n        } else {\r\n          this.userId = null;\r\n          this.activities = [];\r\n          this.loading = false;\r\n        }\r\n      });\r\n     \r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* Base Styles */\r\n  .activities-container {\r\n    max-width: 1400px;\r\n    margin: 0 auto;\r\n    padding: 2rem;\r\n    background-color: #f5f9ff;\r\n    min-height: 100vh;\r\n  }\r\n  \r\n  /* Header Section */\r\n  .header-section {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 2rem;\r\n    flex-wrap: wrap;\r\n    gap: 1rem;\r\n    padding-bottom: 1rem;\r\n    border-bottom: 1px solid #d6e4ff;\r\n  }\r\n  \r\n  .page-title {\r\n    font-size: 2rem;\r\n    font-weight: 700;\r\n    margin: 0;\r\n    color: #2c3e50;\r\n    background: linear-gradient(to right, #3a7bd5, #00d2ff);\r\n    -webkit-text-fill-color: transparent;\r\n  }\r\n  \r\n  .header-actions {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  /* Buttons */\r\n  .button-icon {\r\n    margin-left: 5px;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .add-button {\r\n    background: linear-gradient(135deg, #3a7bd5, #00d2ff);\r\n    color: white;\r\n    border: none;\r\n    padding: 0.75rem 1.5rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n    display: flex;\r\n    align-items: center;\r\n    transition: all 0.3s ease;\r\n    box-shadow: 0 4px 6px rgba(58, 123, 213, 0.2);\r\n  }\r\n  \r\n  .add-button:hover {\r\n    background: linear-gradient(135deg, #2a6bc4, #00c2f0);\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 6px 8px rgba(58, 123, 213, 0.3);\r\n  }\r\n  \r\n  .back-link {\r\n    text-decoration: none;\r\n    color: #3a7bd5;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    font-weight: 500;\r\n    transition: all 0.3s ease;\r\n    padding: 0.5rem;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  .back-link:hover {\r\n    background-color: rgba(58, 123, 213, 0.1);\r\n  }\r\n  \r\n  .back-icon {\r\n    margin-right: 5px;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  /* Form Styles */\r\n  .activity-form {\r\n    background: white;\r\n    padding: 1.5rem;\r\n    border-radius: 12px;\r\n    margin-bottom: 2rem;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n    border: 1px solid #e0ecff;\r\n    animation: slideDown 0.3s ease;\r\n  }\r\n  \r\n  @keyframes slideDown {\r\n    from { opacity: 0; transform: translateY(-20px); }\r\n    to { opacity: 1; transform: translateY(0); }\r\n  }\r\n  \r\n  .form-group {\r\n    margin-bottom: 1.25rem;\r\n  }\r\n  \r\n  .form-group label {\r\n    display: block;\r\n    margin-bottom: 0.5rem;\r\n    font-weight: 600;\r\n    color: #2c3e50;\r\n  }\r\n  \r\n  .form-input {\r\n    width: 100%;\r\n    padding: 0.75rem;\r\n    border: 1px solid #d6e4ff;\r\n    border-radius: 8px;\r\n    font-size: 1rem;\r\n    transition: all 0.3s ease;\r\n    background-color: #f5f9ff;\r\n  }\r\n  \r\n  .form-input:focus {\r\n    outline: none;\r\n    border-color: #3a7bd5;\r\n    box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.2);\r\n  }\r\n  \r\n  textarea.form-input {\r\n    min-height: 100px;\r\n    resize: vertical;\r\n  }\r\n  \r\n  /* Category Selector */\r\n  .category-selector {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .custom-category-input {\r\n    padding: 0.75rem;\r\n    border: 1px solid #d6e4ff;\r\n    border-radius: 8px;\r\n    font-size: 1rem;\r\n    transition: all 0.3s ease;\r\n    background-color: #f5f9ff;\r\n  }\r\n  \r\n  /* Tool Inputs */\r\n  .tool-input {\r\n    display: flex;\r\n    margin-bottom: 0.5rem;\r\n    align-items: center;\r\n  }\r\n  \r\n  .tool-input input {\r\n    flex-grow: 1;\r\n    margin-right: 0.5rem;\r\n  }\r\n  \r\n  .remove-tool {\r\n    background: #ff6b6b;\r\n    color: white;\r\n    border: none;\r\n    width: 2rem;\r\n    height: 2rem;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .remove-tool:hover {\r\n    background: #ff5252;\r\n    transform: scale(1.1);\r\n  }\r\n  \r\n  .remove-tool:disabled {\r\n    background: #cccccc;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n  }\r\n  \r\n  .add-tool {\r\n    background: #4dabf7;\r\n    color: white;\r\n    border: none;\r\n    padding: 0.5rem 1rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-size: 0.9rem;\r\n    margin-top: 0.5rem;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .add-tool:hover {\r\n    background: #339af0;\r\n  }\r\n  \r\n  /* Progress Input */\r\n  .progress-input-container {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .progress-slider {\r\n    flex-grow: 1;\r\n    height: 8px;\r\n    border-radius: 4px;\r\n    background: #e0ecff;\r\n    outline: none;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .progress-slider::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 50%;\r\n    background: #3a7bd5;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n    box-shadow: 0 2px 4px rgba(0,0,0,0.2);\r\n  }\r\n  \r\n  .progress-slider::-webkit-slider-thumb:hover {\r\n    transform: scale(1.1);\r\n    background: #2a6bc4;\r\n  }\r\n  \r\n  .progress-value {\r\n    min-width: 3.5rem;\r\n    font-weight: 600;\r\n    text-align: center;\r\n  }\r\n  \r\n  /* Form Actions */\r\n  .form-actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 1rem;\r\n    margin-top: 1.5rem;\r\n  }\r\n  \r\n  .save-button {\r\n    background: linear-gradient(135deg, #4dabf7, #3a7bd5);\r\n    color: white;\r\n    border: none;\r\n    padding: 0.75rem 1.5rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n    display: flex;\r\n    align-items: center;\r\n    transition: all 0.3s ease;\r\n    box-shadow: 0 2px 5px rgba(77, 171, 247, 0.3);\r\n  }\r\n  \r\n  .save-button:hover {\r\n    background: linear-gradient(135deg, #339af0, #2a6bc4);\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 4px 8px rgba(77, 171, 247, 0.4);\r\n  }\r\n  \r\n  .reset-button {\r\n    background-color: #e0ecff;\r\n    color: #3a7bd5;\r\n    border: none;\r\n    padding: 0.75rem 1.5rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n    display: flex;\r\n    align-items: center;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .reset-button:hover {\r\n    background-color: #d0e0ff;\r\n  }\r\n  \r\n  /* Stats Container */\r\n  .stats-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n    gap: 1rem;\r\n    margin-bottom: 2rem;\r\n  }\r\n  \r\n  .stat-card {\r\n    background: white;\r\n    border-radius: 12px;\r\n    padding: 1.5rem;\r\n    text-align: center;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.05);\r\n    transition: all 0.3s ease;\r\n    border: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .stat-card:hover {\r\n    transform: translateY(-5px);\r\n    box-shadow: 0 6px 12px rgba(0,0,0,0.1);\r\n  }\r\n  \r\n  .stat-value {\r\n    font-size: 2rem;\r\n    font-weight: 700;\r\n    margin-bottom: 0.5rem;\r\n    color: #3a7bd5;\r\n  }\r\n  \r\n  .stat-label {\r\n    color: #6c757d;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  /* Charts Container */\r\n  .charts-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n    gap: 1.5rem;\r\n    margin-bottom: 2rem;\r\n  }\r\n  \r\n  .chart-card {\r\n    background: white;\r\n    border-radius: 12px;\r\n    padding: 1.5rem;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.05);\r\n    border: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .chart-card h3 {\r\n    margin-top: 0;\r\n    margin-bottom: 1rem;\r\n    color: #2c3e50;\r\n    font-size: 1.25rem;\r\n  }\r\n  \r\n  .chart-wrapper {\r\n    position: relative;\r\n    height: 250px;\r\n    width:100%;\r\n  }\r\n  \r\n  \r\n  /* View Toggle */\r\n  .view-toggle {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 0.5rem;\r\n    margin-bottom: 1.5rem;\r\n    background: white;\r\n    padding: 1rem;\r\n    border-radius: 12px;\r\n    box-shadow: 0 2px 6px rgba(0,0,0,0.05);\r\n    border: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .view-btn {\r\n    background: #e0ecff;\r\n    color: #3a7bd5;\r\n    border: none;\r\n    padding: 0.5rem 1rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-weight: 500;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .view-btn.active {\r\n    background: #3a7bd5;\r\n    color: white;\r\n  }\r\n  \r\n  .view-btn:hover:not(.active) {\r\n    background: #d0e0ff;\r\n  }\r\n  \r\n  /* Loading State */\r\n  .loading-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 2rem;\r\n    color: #6c757d;\r\n  }\r\n  \r\n  .loading-spinner {\r\n    width: 50px;\r\n    height: 50px;\r\n    border: 4px solid rgba(58, 123, 213, 0.2);\r\n    border-radius: 50%;\r\n    border-top-color: #3a7bd5;\r\n    animation: spin 1s ease-in-out infinite;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  @keyframes spin {\r\n    to { transform: rotate(360deg); }\r\n  }\r\n  \r\n  /* Card View */\r\n  .activities-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .activity-card {\r\n    background: white;\r\n    border-radius: 12px;\r\n    padding: 1.5rem;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.05);\r\n    transition: all 0.3s ease;\r\n    border: 1px solid #e0ecff;\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: relative;\r\n  }\r\n  \r\n  .activity-card:hover {\r\n    transform: translateY(-5px);\r\n    box-shadow: 0 6px 12px rgba(0,0,0,0.1);\r\n  }\r\n  \r\n  .activity-card.completed-card {\r\n    border-left: 4px solid #51cf66;\r\n  }\r\n  \r\n  .activity-card.priority-high {\r\n    border-left: 4px solid #ff6b6b;\r\n  }\r\n  \r\n  .activity-card.priority-medium {\r\n    border-left: 4px solid #ff922b;\r\n  }\r\n  \r\n  .activity-card.priority-low {\r\n    border-left: 4px solid #51cf66;\r\n  }\r\n  \r\n  .activity-card.overdue-card {\r\n    border-left: 4px solid #ff6b6b;\r\n    animation: pulse 2s infinite;\r\n  }\r\n  \r\n  @keyframes pulse {\r\n    0% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.4); }\r\n    70% { box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }\r\n    100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0); }\r\n  }\r\n  \r\n  .activity-header {\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .activity-title {\r\n    margin: 0;\r\n    font-size: 1.25rem;\r\n    color: #2c3e50;\r\n    word-break: break-word;\r\n  }\r\n  \r\n  .activity-meta {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 0.5rem;\r\n    font-size: 0.85rem;\r\n    color: #6c757d;\r\n  }\r\n  \r\n  .activity-date {\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .activity-priority {\r\n    padding: 0.25rem 0.5rem;\r\n    border-radius: 12px;\r\n    font-size: 0.75rem;\r\n    font-weight: 600;\r\n    text-transform: capitalize;\r\n  }\r\n  \r\n  .priority-high-badge {\r\n    background-color: #fff0f0;\r\n    color: #e03131;\r\n  }\r\n  \r\n  .priority-medium-badge {\r\n    background-color: #fff4e6;\r\n    color: #e67700;\r\n  }\r\n  \r\n  .priority-low-badge {\r\n    background-color: #ebfbee;\r\n    color: #2b8a3e;\r\n  }\r\n  \r\n  .activity-category {\r\n    margin: 0.5rem 0;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .category-label {\r\n    font-weight: 600;\r\n    margin-right: 0.5rem;\r\n  }\r\n  \r\n  /* Activity Tools */\r\n  .activity-tools {\r\n    margin: 1rem 0;\r\n  }\r\n  \r\n  .tools-label {\r\n    font-weight: 600;\r\n    margin-right: 0.5rem;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .tool-tag {\r\n    display: inline-block;\r\n    background: #e3f2fd;\r\n    color: #1976d2;\r\n    padding: 0.25rem 0.75rem;\r\n    border-radius: 12px;\r\n    font-size: 0.8rem;\r\n    margin-right: 0.5rem;\r\n    margin-bottom: 0.5rem;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .tool-tag:hover {\r\n    background: #bbdefb;\r\n    transform: translateY(-1px);\r\n  }\r\n  \r\n  /* Progress Bar */\r\n  .activity-progress {\r\n    margin: 1rem 0;\r\n  }\r\n  \r\n  .progress-bar-container {\r\n    height: 8px;\r\n    background-color: #e0ecff;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  \r\n  .progress-bar {\r\n    height: 100%;\r\n    transition: width 0.5s ease;\r\n  }\r\n  \r\n  .progress-low {\r\n    background-color: #ff922b;\r\n  }\r\n  \r\n  .progress-mid {\r\n    background-color: #3a7bd5;\r\n  }\r\n  \r\n  .progress-high {\r\n    background-color: #51cf66;\r\n  }\r\n  \r\n  .progress-text {\r\n    font-size: 0.9rem;\r\n    color: #6c757d;\r\n    text-align: center;\r\n  }\r\n  \r\n  /* Activity Notes */\r\n  .activity-notes {\r\n    margin: 1rem 0;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .notes-label {\r\n    font-weight: 600;\r\n    margin-bottom: 0.25rem;\r\n  }\r\n  \r\n  .notes-content {\r\n    background: #f5f9ff;\r\n    padding: 0.75rem;\r\n    border-radius: 8px;\r\n    border: 1px dashed #d6e4ff;\r\n    white-space: pre-wrap;\r\n  }\r\n  \r\n  /* Activity Footer */\r\n  .activity-footer {\r\n    margin-top: auto;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    gap: 0.5rem;\r\n    font-size: 0.85rem;\r\n    padding-top: 1rem;\r\n    border-top: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .activity-status {\r\n    color: #6c757d;\r\n  }\r\n  \r\n  .status-completed {\r\n    color: #51cf66;\r\n    font-weight: 600;\r\n  }\r\n  \r\n  .activity-deadline {\r\n    color: #6c757d;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.25rem;\r\n  }\r\n  \r\n  .deadline-warning {\r\n    color: #ff922b;\r\n    font-size: 1rem;\r\n  }\r\n  \r\n  .deadline-danger {\r\n    color: #ff6b6b;\r\n    font-size: 1rem;\r\n  }\r\n  \r\n  .activity-actions {\r\n    display: flex;\r\n    gap: 0.5rem;\r\n    margin-left: auto;\r\n  }\r\n  \r\n  .action-btn {\r\n    background: none;\r\n    border: none;\r\n    width: 2rem;\r\n    height: 2rem;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .action-btn.edit {\r\n    color: #3a7bd5;\r\n  }\r\n  .action-btn.complete {\r\n  color: #4CAF50; /* Green color */\r\n}\r\n\r\n.action-btn.complete:hover {\r\n  color: #3d8b40; /* Darker green on hover */\r\n}\r\n  \r\n  .action-btn.edit:hover {\r\n    background: rgba(58, 123, 213, 0.1);\r\n  }\r\n  \r\n  .action-btn.favorite {\r\n    color: #f1c40f;\r\n  }\r\n  \r\n  .action-btn.favorite:hover {\r\n    background: rgba(241, 196, 15, 0.1);\r\n  }\r\n  \r\n  .action-btn.delete {\r\n    color: #ff6b6b;\r\n  }\r\n  \r\n  .action-btn.delete:hover {\r\n    background: rgba(255, 107, 107, 0.1);\r\n  }\r\n  \r\n  /* List View */\r\n  .activities-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .activity-item {\r\n    background: white;\r\n    border-radius: 12px;\r\n    padding: 1rem;\r\n    box-shadow: 0 2px 4px rgba(0,0,0,0.05);\r\n    border: 1px solid #e0ecff;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .activity-item:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.1);\r\n  }\r\n  \r\n  .activity-item.completed-item {\r\n    border-left: 4px solid #51cf66;\r\n  }\r\n  \r\n  .activity-item.priority-high-item {\r\n    border-left: 4px solid #ff6b6b;\r\n  }\r\n  \r\n  .activity-item.overdue-item {\r\n    border-left: 4px solid #ff6b6b;\r\n    animation: pulse 2s infinite;\r\n  }\r\n  \r\n  .item-main {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .item-title {\r\n    font-weight: 600;\r\n    color: #2c3e50;\r\n  }\r\n  \r\n  .item-meta {\r\n    display: flex;\r\n    gap: 1rem;\r\n    font-size: 0.85rem;\r\n    color: #6c757d;\r\n  }\r\n  \r\n  .item-category {\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .item-date {\r\n    margin-left: auto;\r\n  }\r\n  \r\n  .item-progress {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 1rem;\r\n    margin-top: 0.5rem;\r\n  }\r\n  \r\n  .item-progress .progress-bar-container {\r\n    flex-grow: 1;\r\n    height: 6px;\r\n  }\r\n  \r\n  .item-progress .progress-text {\r\n    font-size: 0.8rem;\r\n    min-width: 3rem;\r\n  }\r\n  \r\n  .item-details {\r\n    margin-top: 1rem;\r\n    padding-top: 1rem;\r\n    border-top: 1px dashed #e0ecff;\r\n  }\r\n  \r\n  .details-section {\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .details-section h5 {\r\n    margin: 0 0 0.5rem;\r\n    font-size: 0.9rem;\r\n    color: #2c3e50;\r\n  }\r\n  \r\n  .tools-container {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .notes-content {\r\n    font-size: 0.9rem;\r\n    line-height: 1.5;\r\n    color: #495057;\r\n  }\r\n  \r\n  .status-info {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .status-text {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .status-completed {\r\n    color: #51cf66;\r\n    font-weight: 600;\r\n  }\r\n  \r\n  .priority-badge {\r\n    padding: 0.25rem 0.5rem;\r\n    border-radius: 12px;\r\n    font-size: 0.75rem;\r\n    font-weight: 600;\r\n    text-transform: capitalize;\r\n  }\r\n  \r\n  .priority-high-badge {\r\n    background-color: #fff0f0;\r\n    color: #e03131;\r\n  }\r\n  \r\n  .priority-medium-badge {\r\n    background-color: #fff4e6;\r\n    color: #e67700;\r\n  }\r\n  \r\n  .priority-low-badge {\r\n    background-color: #ebfbee;\r\n    color: #2b8a3e;\r\n  }\r\n  \r\n  .details-actions {\r\n    display: flex;\r\n    gap: 0.5rem;\r\n    margin-top: 1rem;\r\n  }\r\n  \r\n  .btn {\r\n    padding: 0.5rem 1rem;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-size: 0.85rem;\r\n    cursor: pointer;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .btn.small-btn {\r\n    padding: 0.25rem 0.75rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .btn.complete {\r\n    background: #51cf66;\r\n    color: white;\r\n  }\r\n  \r\n  .btn.complete:hover {\r\n    background: #40c057;\r\n  }\r\n  \r\n  .btn.delete {\r\n    background: #ff6b6b;\r\n    color: white;\r\n  }\r\n  \r\n  .btn.delete:hover {\r\n    background: #ff5252;\r\n  }\r\n  \r\n  /* Table View */\r\n  .activities-table {\r\n    background: white;\r\n    border-radius: 12px;\r\n    padding: 1.5rem;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.05);\r\n    border: 1px solid #e0ecff;\r\n    overflow-x: auto;\r\n  }\r\n  \r\n  .table-controls {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 1rem;\r\n    margin-bottom: 1.5rem;\r\n    align-items: center;\r\n  }\r\n  \r\n  .search-container {\r\n    position: relative;\r\n    flex-grow: 1;\r\n    min-width: 200px;\r\n  }\r\n  \r\n  .search-input {\r\n    width: 100%;\r\n    padding: 0.75rem 1rem 0.75rem 2.5rem;\r\n    border: 1px solid #d6e4ff;\r\n    border-radius: 8px;\r\n    font-size: 1rem;\r\n    transition: all 0.3s ease;\r\n    background-color: #f5f9ff;\r\n  }\r\n  \r\n  .search-input:focus {\r\n    outline: none;\r\n    border-color: #3a7bd5;\r\n    box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.2);\r\n  }\r\n  \r\n  .search-icon {\r\n    position: absolute;\r\n    left: 1rem;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    color: #6c757d;\r\n  }\r\n  \r\n  .filter-container, .sort-container {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .filter-select, .sort-select {\r\n    padding: 0.75rem;\r\n    border: 1px solid #d6e4ff;\r\n    border-radius: 8px;\r\n    font-size: 0.9rem;\r\n    transition: all 0.3s ease;\r\n    background-color: #f5f9ff;\r\n  }\r\n  \r\n  .filter-select:focus, .sort-select:focus {\r\n    outline: none;\r\n    border-color: #3a7bd5;\r\n    box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.2);\r\n  }\r\n  \r\n  table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n  }\r\n  \r\n  th, td {\r\n    padding: 1rem;\r\n    text-align: left;\r\n    border-bottom: 1px solid #e0ecff;\r\n  }\r\n  \r\n  th {\r\n    font-weight: 600;\r\n    color: #2c3e50;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    white-space: nowrap;\r\n  }\r\n  \r\n  th:hover {\r\n    background-color: #f5f9ff;\r\n  }\r\n  \r\n  .sort-icon {\r\n    margin-left: 0.5rem;\r\n  }\r\n  \r\n  tr:hover td {\r\n    background-color: #f5f9ff;\r\n  }\r\n  \r\n  .completed-row {\r\n    background-color: rgba(81, 207, 102, 0.05);\r\n  }\r\n  \r\n  .priority-high-row {\r\n    background-color: rgba(255, 107, 107, 0.05);\r\n  }\r\n  \r\n  .overdue-row {\r\n    animation: pulse-bg 2s infinite;\r\n  }\r\n  \r\n  @keyframes pulse-bg {\r\n    0% { background-color: rgba(255, 107, 107, 0.05); }\r\n    50% { background-color: rgba(255, 107, 107, 0.1); }\r\n    100% { background-color: rgba(255, 107, 107, 0.05); }\r\n  }\r\n  \r\n  .activity-title {\r\n    font-weight: 500;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  \r\n  .favorite-star {\r\n    color: #f1c40f;\r\n    margin-left: 0.5rem;\r\n  }\r\n  \r\n  .progress-cell {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .progress-cell .progress-bar-container {\r\n    flex-grow: 1;\r\n    height: 6px;\r\n  }\r\n  \r\n  .progress-cell .progress-text {\r\n    min-width: 3rem;\r\n    text-align: right;\r\n  }\r\n  \r\n  .deadline-cell {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.25rem;\r\n  }\r\n  \r\n  .deadline-cell.overdue {\r\n    color: #ff6b6b;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .table-actions {\r\n    display: flex;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  /* Empty State */\r\n  .empty-state {\r\n    text-align: center;\r\n    padding: 3rem;\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.05);\r\n    margin-top: 2rem;\r\n    border: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .empty-icon {\r\n    font-size: 3rem;\r\n    margin-bottom: 1rem;\r\n    opacity: 0.7;\r\n    color: #3a7bd5;\r\n  }\r\n  \r\n  .empty-state h3 {\r\n    margin: 0.5rem 0;\r\n    color: #2c3e50;\r\n  }\r\n  \r\n  .empty-state p {\r\n    color: #6c757d;\r\n    margin-bottom: 1.5rem;\r\n  }\r\n  \r\n  .cta-button {\r\n    background: linear-gradient(135deg, #3a7bd5, #00d2ff);\r\n    color: white;\r\n    border: none;\r\n    padding: 0.75rem 1.5rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n    transition: all 0.3s ease;\r\n    box-shadow: 0 4px 6px rgba(58, 123, 213, 0.2);\r\n  }\r\n  \r\n  .cta-button:hover {\r\n    background: linear-gradient(135deg, #2a6bc4, #00c2f0);\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 6px 8px rgba(58, 123, 213, 0.3);\r\n  }\r\n  \r\n  /* Modal */\r\n  .modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n    animation: fadeIn 0.3s ease;\r\n  }\r\n  \r\n  .modal-container {\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\r\n    width: 90%;\r\n    max-width: 500px;\r\n    overflow: hidden;\r\n    animation: modalSlideUp 0.3s ease;\r\n  }\r\n  \r\n  .modal-container.large-modal {\r\n    max-width: 800px;\r\n  }\r\n  \r\n  @keyframes modalSlideUp {\r\n    from { transform: translateY(20px); opacity: 0; }\r\n    to { transform: translateY(0); opacity: 1; }\r\n  }\r\n  \r\n  .modal-header {\r\n    padding: 1rem 1.5rem;\r\n    border-bottom: 1px solid #e0ecff;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  \r\n  .modal-header h3 {\r\n    margin: 0;\r\n    color: #2c3e50;\r\n  }\r\n  \r\n  .modal-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 1.5rem;\r\n    cursor: pointer;\r\n    color: #6c757d;\r\n    transition: all 0.3s ease;\r\n    padding: 0.25rem;\r\n  }\r\n  \r\n  .modal-close:hover {\r\n    color: #ff6b6b;\r\n  }\r\n  \r\n  .modal-body {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .log-container {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .log-form {\r\n    padding: 1rem;\r\n    border-right: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .log-entries {\r\n    padding: 1rem;\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n  }\r\n  \r\n  .log-entry {\r\n    position: relative;\r\n    padding: 1rem;\r\n    margin-bottom: 1rem;\r\n    background: #f5f9ff;\r\n    border-radius: 8px;\r\n    border: 1px solid #e0ecff;\r\n  }\r\n  \r\n  .log-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 0.5rem;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .log-date {\r\n    color: #6c757d;\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  .log-progress {\r\n    color: #3a7bd5;\r\n    font-weight: 600;\r\n  }\r\n  \r\n  .log-content {\r\n    font-size: 0.9rem;\r\n    line-height: 1.5;\r\n    color: #495057;\r\n  }\r\n  \r\n  .log-delete {\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    right: 0.5rem;\r\n    background: none;\r\n    border: none;\r\n    color: #ff6b6b;\r\n    cursor: pointer;\r\n    font-size: 1.2rem;\r\n    width: 1.5rem;\r\n    height: 1.5rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 50%;\r\n  }\r\n  \r\n  .log-delete:hover {\r\n    background: rgba(255, 107, 107, 0.1);\r\n  }\r\n  \r\n  .empty-logs {\r\n    color: #6c757d;\r\n    text-align: center;\r\n    padding: 2rem;\r\n    font-style: italic;\r\n  }\r\n  \r\n  .modal-footer {\r\n    padding: 1rem 1.5rem;\r\n    border-top: 1px solid #e0ecff;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .modal-cancel {\r\n    background: #e0ecff;\r\n    color: #3a7bd5;\r\n    border: none;\r\n    padding: 0.5rem 1rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .modal-cancel:hover {\r\n    background: #d0e0ff;\r\n  }\r\n  \r\n  .modal-confirm {\r\n    background: #ff6b6b;\r\n    color: white;\r\n    border: none;\r\n    padding: 0.5rem 1rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .modal-confirm:hover {\r\n    background: #ff5252;\r\n  }\r\n  \r\n  /* Responsive Adjustments */\r\n  @media (max-width: 768px) {\r\n    .header-section {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n    }\r\n    \r\n    .header-actions {\r\n      width: 100%;\r\n      justify-content: space-between;\r\n    }\r\n    \r\n    .charts-container {\r\n      grid-template-columns: 1fr;\r\n    }\r\n    \r\n    .log-container {\r\n      grid-template-columns: 1fr;\r\n    }\r\n    \r\n    .log-form {\r\n      border-right: none;\r\n      border-bottom: 1px solid #e0ecff;\r\n      padding-bottom: 1.5rem;\r\n    }\r\n    \r\n    .modal-container.large-modal {\r\n      max-height: 80vh;\r\n      overflow-y: auto;\r\n    }\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    .activities-container {\r\n      padding: 1rem;\r\n    }\r\n    \r\n    .form-actions {\r\n      flex-direction: column;\r\n      gap: 0.5rem;\r\n    }\r\n    \r\n    .save-button, .reset-button {\r\n      width: 100%;\r\n    }\r\n    \r\n    .table-controls {\r\n      flex-direction: column;\r\n      align-items: stretch;\r\n    }\r\n    \r\n    .filter-container, .sort-container {\r\n      width: 100%;\r\n    }\r\n    \r\n    .filter-select, .sort-select {\r\n      width: 100%;\r\n    }\r\n  }\r\n  .manage-categories-btn {\r\n  margin-left: 10px;\r\n  padding: 8px 12px;\r\n  background: #f0f2f5;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  color: #555;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n.manage-categories-btn:hover {\r\n  background: #e0e2e5;\r\n  border-color: #ccc;\r\n}\r\n\r\n.manage-categories-btn i {\r\n  font-size: 14px;\r\n}\r\n.filter-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.filter-select {\r\n  padding: 0.75rem;\r\n  border: 1px solid #d6e4ff;\r\n  border-radius: 8px;\r\n  font-size: 0.9rem;\r\n  transition: all 0.3s ease;\r\n  background-color: #f5f9ff;\r\n  min-width: 150px;\r\n}\r\n\r\n.empty-table-state {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin-top: 1rem;\r\n  border: 1px dashed #e0ecff;\r\n}\r\n\r\n.reset-filters-btn {\r\n  margin-top: 1rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #3a7bd5;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.reset-filters-btn:hover {\r\n  background: #2a6bc4;\r\n}\r\n.action-btn.favorite {\r\n  color: #f1c40f;\r\n}\r\n\r\n.action-btn.favorite:hover {\r\n  background: rgba(241, 196, 15, 0.1);\r\n}\r\n\r\n/* Ensure Font Awesome icons are visible */\r\n.fas, .far {\r\n  font-size: 1rem;\r\n  width: 1em;\r\n  height: 1em;\r\n  display: inline-block;\r\n}\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}