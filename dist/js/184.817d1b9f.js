"use strict";(self["webpackChunkforum_app"]=self["webpackChunkforum_app"]||[]).push([[184],{7184:(r,a,s)=>{s.r(a),s.d(a,{default:()=>H});var e=s(6768),t=s(4232),o=s(5130),n={class:"profile-container"},i={class:"navbar"},l={class:"navbar-container"},u={class:"nav-links"},c={class:"user-greeting"},d={class:"profile-content"},f={class:"profile-card"},p={class:"avatar-section"},w={class:"avatar-wrapper"},m={class:"avatar-color-picker"},v={class:"color-options"},h=["onClick"],P={class:"profile-form"},k={class:"form-section"},g={class:"form-row"},C={class:"form-group"},b={class:"form-group"},N=["disabled"],L={key:0},y={key:1},E={class:"form-section"},x={class:"form-group"},A={key:0,class:"field-error"},I={class:"form-group"},M={key:0,class:"field-error"},U={class:"form-group"},S={key:0,class:"field-error"},F=["disabled"],X={key:0},_={key:1},W={key:0,class:"success-message"},V={key:1,class:"error-message"};function R(r,a,s,R,q,D){var Q=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("div",n,[(0,e.Lk)("div",i,[(0,e.Lk)("div",l,[(0,e.bF)(Q,{to:"/forum",class:"logo"},{default:(0,e.k6)((function(){return a[14]||(a[14]=[(0,e.Lk)("i",{class:"fas fa-comments"},null,-1),(0,e.Lk)("span",null,"Forum",-1)])})),_:1}),(0,e.Lk)("div",u,["/forum"!==r.$route.path?((0,e.uX)(),(0,e.Wv)(Q,{key:0,to:"/forum",class:"nav-link back-to-discussions"},{default:(0,e.k6)((function(){return a[15]||(a[15]=[(0,e.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,e.Lk)("span",null,"Back to Discussions",-1)])})),_:1})):(0,e.Q3)("",!0),q.user?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Lk)("div",c,[(0,e.Lk)("div",{class:"initials-avatar",style:(0,t.Tr)(q.navbarAvatarStyle)},(0,t.v_)(D.navbarInitials),5),(0,e.Lk)("span",null,"Hello, "+(0,t.v_)(D.navbarDisplayName),1)]),(0,e.Lk)("button",{onClick:a[0]||(a[0]=function(){return D.logout&&D.logout.apply(D,arguments)}),class:"logout-button"},a[16]||(a[16]=[(0,e.Lk)("i",{class:"fas fa-sign-out-alt"},null,-1),(0,e.Lk)("span",null,"Log Out",-1)]))],64)):((0,e.uX)(),(0,e.Wv)(Q,{key:2,to:"/login",class:"login-button"},{default:(0,e.k6)((function(){return a[17]||(a[17]=[(0,e.Lk)("i",{class:"fas fa-sign-in-alt"},null,-1),(0,e.Lk)("span",null,"Log In",-1)])})),_:1}))])])]),(0,e.Lk)("div",d,[a[33]||(a[33]=(0,e.Lk)("h1",null,"My Profile",-1)),(0,e.Lk)("div",f,[(0,e.Lk)("div",p,[(0,e.Lk)("div",w,[(0,e.Lk)("div",{class:"initials-avatar",style:(0,t.Tr)(q.profileAvatarStyle)},(0,t.v_)(D.profileInitials),5),(0,e.Lk)("div",m,[a[18]||(a[18]=(0,e.Lk)("p",null,"Avatar Color:",-1)),(0,e.Lk)("div",v,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(q.colorOptions,(function(r,a){return(0,e.uX)(),(0,e.CE)("div",{key:a,class:(0,t.C4)(["color-option",{active:q.avatarColor===r}]),style:(0,t.Tr)({backgroundColor:r}),onClick:function(a){return D.selectAvatarColor(r)}},null,14,h)})),128))])])])]),(0,e.Lk)("div",P,[(0,e.Lk)("div",k,[a[22]||(a[22]=(0,e.Lk)("h2",null,[(0,e.Lk)("i",{class:"fas fa-user"}),(0,e.eW)(" Personal Information")],-1)),(0,e.Lk)("div",g,[(0,e.Lk)("div",C,[a[19]||(a[19]=(0,e.Lk)("label",{for:"firstName"},"First Name",-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"firstName","onUpdate:modelValue":a[1]||(a[1]=function(r){return q.firstName=r}),placeholder:"Enter your first name",onInput:a[2]||(a[2]=function(){return D.updateInitialsPreview&&D.updateInitialsPreview.apply(D,arguments)})},null,544),[[o.Jo,q.firstName]])]),(0,e.Lk)("div",b,[a[20]||(a[20]=(0,e.Lk)("label",{for:"lastName"},"Last Name",-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"lastName","onUpdate:modelValue":a[3]||(a[3]=function(r){return q.lastName=r}),placeholder:"Enter your last name",onInput:a[4]||(a[4]=function(){return D.updateInitialsPreview&&D.updateInitialsPreview.apply(D,arguments)})},null,544),[[o.Jo,q.lastName]])])]),(0,e.Lk)("button",{onClick:a[5]||(a[5]=function(){return D.updateProfile&&D.updateProfile.apply(D,arguments)}),disabled:!D.formChanged||q.updatingProfile,class:"save-btn"},[q.updatingProfile?((0,e.uX)(),(0,e.CE)("span",y,a[21]||(a[21]=[(0,e.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,e.eW)(" Saving...")]))):((0,e.uX)(),(0,e.CE)("span",L,"Save Changes"))],8,N)]),(0,e.Lk)("div",E,[a[30]||(a[30]=(0,e.Lk)("h2",null,[(0,e.Lk)("i",{class:"fas fa-lock"}),(0,e.eW)(" Change Password")],-1)),(0,e.Lk)("div",x,[a[24]||(a[24]=(0,e.Lk)("label",{for:"currentPassword"},"Current Password",-1)),(0,e.bo)((0,e.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":a[6]||(a[6]=function(r){return q.currentPassword=r}),placeholder:"Enter current password",onBlur:a[7]||(a[7]=function(){return D.validateCurrentPassword&&D.validateCurrentPassword.apply(D,arguments)})},null,544),[[o.Jo,q.currentPassword]]),q.currentPasswordError?((0,e.uX)(),(0,e.CE)("div",A,[a[23]||(a[23]=(0,e.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,e.eW)(" "+(0,t.v_)(q.currentPasswordError),1)])):(0,e.Q3)("",!0)]),(0,e.Lk)("div",I,[a[26]||(a[26]=(0,e.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,e.bo)((0,e.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":a[8]||(a[8]=function(r){return q.newPassword=r}),placeholder:"Enter new password (min 6 characters)",onBlur:a[9]||(a[9]=function(){return D.validateNewPassword&&D.validateNewPassword.apply(D,arguments)}),onInput:a[10]||(a[10]=function(){return D.validatePasswordMatch&&D.validatePasswordMatch.apply(D,arguments)})},null,544),[[o.Jo,q.newPassword]]),q.newPasswordError?((0,e.uX)(),(0,e.CE)("div",M,[a[25]||(a[25]=(0,e.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,e.eW)(" "+(0,t.v_)(q.newPasswordError),1)])):(0,e.Q3)("",!0)]),(0,e.Lk)("div",U,[a[28]||(a[28]=(0,e.Lk)("label",{for:"confirmPassword"},"Confirm New Password",-1)),(0,e.bo)((0,e.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":a[11]||(a[11]=function(r){return q.confirmPassword=r}),placeholder:"Confirm new password",onBlur:a[12]||(a[12]=function(){return D.validatePasswordMatch&&D.validatePasswordMatch.apply(D,arguments)})},null,544),[[o.Jo,q.confirmPassword]]),q.confirmPasswordError?((0,e.uX)(),(0,e.CE)("div",S,[a[27]||(a[27]=(0,e.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,e.eW)(" "+(0,t.v_)(q.confirmPasswordError),1)])):(0,e.Q3)("",!0)]),(0,e.Lk)("button",{onClick:a[13]||(a[13]=function(){return D.updatePassword&&D.updatePassword.apply(D,arguments)}),disabled:!D.isPasswordFormValid||q.updatingPassword,class:"save-btn"},[q.updatingPassword?((0,e.uX)(),(0,e.CE)("span",_,a[29]||(a[29]=[(0,e.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,e.eW)(" Updating...")]))):((0,e.uX)(),(0,e.CE)("span",X,"Change Password"))],8,F)]),q.updateSuccess?((0,e.uX)(),(0,e.CE)("div",W,[a[31]||(a[31]=(0,e.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,e.eW)(" "+(0,t.v_)(q.successMessage),1)])):(0,e.Q3)("",!0),q.errorMessage?((0,e.uX)(),(0,e.CE)("div",V,[a[32]||(a[32]=(0,e.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,e.eW)(" "+(0,t.v_)(q.errorMessage),1)])):(0,e.Q3)("",!0)])])])])}var q=s(4048),D=s(388),Q=(s(8706),s(8598),s(4114),s(4782),s(3288),s(2762),s(6031),s(3831)),T=s(7617);const B={name:"CombinedProfileView",data:function(){return{user:null,firstName:"",lastName:"",originalFirstName:"",originalLastName:"",avatarColor:"",originalAvatarColor:"",colorOptions:["#3498db","#2ecc71","#e74c3c","#f39c12","#9b59b6","#1abc9c","#d35400","#34495e","#16a085","#c0392b"],navbarAvatarStyle:{backgroundColor:"",color:"#ffffff"},profileAvatarStyle:{backgroundColor:"",color:"#ffffff"},currentPassword:"",newPassword:"",confirmPassword:"",updatingPassword:!1,currentPasswordError:"",newPasswordError:"",confirmPasswordError:"",updatingProfile:!1,updateSuccess:!1,successMessage:"",errorMessage:""}},computed:{profileInitials:function(){return this.getInitials(this.firstName,this.lastName)},navbarInitials:function(){return this.getInitials(this.firstName,this.lastName)},navbarDisplayName:function(){return"".concat(this.firstName," ").concat(this.lastName).trim()||"User"},formChanged:function(){return this.firstName!==this.originalFirstName||this.lastName!==this.originalLastName||this.avatarColor!==this.originalAvatarColor},displayName:function(){return"".concat(this.firstName," ").concat(this.lastName).trim()},isPasswordFormValid:function(){return this.currentPassword&&!this.currentPasswordError&&this.newPassword&&!this.newPasswordError&&this.confirmPassword&&!this.confirmPasswordError&&this.newPassword===this.confirmPassword}},created:function(){var r=(0,Q.xI)();this.user=r.currentUser,this.loadUserProfile()},methods:{selectAvatarColor:function(r){this.avatarColor=r,this.navbarAvatarStyle.backgroundColor=r,this.profileAvatarStyle.backgroundColor=r},generateRandomColor:function(){return this.colorOptions[Math.floor(Math.random()*this.colorOptions.length)]},getInitials:function(r,a){var s=r?r.charAt(0).toUpperCase():"",e=a?a.charAt(0).toUpperCase():"";return"".concat(s).concat(e)},updateInitialsPreview:function(){},loadUserProfile:function(){var r=this;return(0,D.A)((0,q.A)().mark((function a(){var s,e,t,o,n;return(0,q.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.user){a.next=2;break}return a.abrupt("return");case 2:return s=(0,T.aU)(),a.prev=3,a.next=6,(0,T.x7)((0,T.H9)(s,"users",r.user.uid));case 6:e=a.sent,e.exists()?(t=e.data(),r.firstName=t.firstName||"",r.lastName=t.lastName||"",r.firstName||r.lastName||!r.user.displayName||(o=r.user.displayName.split(" "),r.firstName=o[0]||"",r.lastName=o.slice(1).join(" ")||""),r.avatarColor=t.avatarColor||r.generateRandomColor()):r.user.displayName?(n=r.user.displayName.split(" "),r.firstName=n[0]||"",r.lastName=n.slice(1).join(" ")||"",r.avatarColor=r.generateRandomColor()):r.avatarColor=r.generateRandomColor(),r.originalFirstName=r.firstName,r.originalLastName=r.lastName,r.originalAvatarColor=r.avatarColor,r.navbarAvatarStyle.backgroundColor=r.avatarColor,r.profileAvatarStyle.backgroundColor=r.avatarColor,a.next=22;break;case 15:a.prev=15,a.t0=a["catch"](3),console.error("Error loading user profile:",a.t0),r.errorMessage="Failed to load profile. Please try again.",r.avatarColor=r.generateRandomColor(),r.navbarAvatarStyle.backgroundColor=r.avatarColor,r.profileAvatarStyle.backgroundColor=r.avatarColor;case 22:case"end":return a.stop()}}),a,null,[[3,15]])})))()},updateProfile:function(){var r=this;return(0,D.A)((0,q.A)().mark((function a(){var s,e,t,o,n;return(0,q.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.formChanged&&r.user){a.next=2;break}return a.abrupt("return");case 2:return r.updatingProfile=!0,r.errorMessage="",a.prev=4,s=(0,Q.xI)(),e=(0,T.aU)(),t=s.currentUser,a.next=10,(0,Q.r7)(t,{displayName:r.displayName});case 10:return o=(0,T.H9)(e,"users",t.uid),a.next=13,(0,T.x7)(o);case 13:if(n=a.sent,!n.exists()){a.next=19;break}return a.next=17,(0,T.mZ)(o,{firstName:r.firstName,lastName:r.lastName,displayName:r.displayName,avatarColor:r.avatarColor,photoURL:n.data().photoURL||null,lastUpdated:new Date});case 17:a.next=21;break;case 19:return a.next=21,(0,T.BN)(o,{firstName:r.firstName,lastName:r.lastName,displayName:r.displayName,avatarColor:r.avatarColor,email:t.email,createdAt:new Date,lastUpdated:new Date});case 21:r.originalFirstName=r.firstName,r.originalLastName=r.lastName,r.originalAvatarColor=r.avatarColor,r.showSuccess("Profile updated successfully!"),a.next=31;break;case 27:a.prev=27,a.t0=a["catch"](4),console.error("Error updating profile:",a.t0),r.errorMessage=r.getFirebaseError(a.t0.code)||"Failed to update profile. Please try again.";case 31:return a.prev=31,r.updatingProfile=!1,a.finish(31);case 34:case"end":return a.stop()}}),a,null,[[4,27,31,34]])})))()},validateCurrentPassword:function(){this.currentPassword?this.currentPassword.length<6?this.currentPasswordError="Password must be at least 6 characters":this.currentPasswordError="":this.currentPasswordError="Current password is required"},validateNewPassword:function(){this.newPassword?this.newPassword.length<6?this.newPasswordError="Password must be at least 6 characters":this.newPassword===this.currentPassword?this.newPasswordError="New password must be different from current password":this.newPasswordError="":this.newPasswordError="New password is required",this.validatePasswordMatch()},validatePasswordMatch:function(){this.newPassword&&this.confirmPassword&&this.newPassword!==this.confirmPassword?this.confirmPasswordError="Passwords do not match":this.confirmPasswordError=""},updatePassword:function(){var r=this;return(0,D.A)((0,q.A)().mark((function a(){var s,e,t;return(0,q.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.isPasswordFormValid){a.next=2;break}return a.abrupt("return");case 2:return r.updatingPassword=!0,r.errorMessage="",a.prev=4,s=(0,Q.xI)(),e=s.currentUser,t=Q.IX.credential(e.email,r.currentPassword),a.next=10,(0,Q.kZ)(e,t);case 10:return a.next=12,(0,Q.f3)(e,r.newPassword);case 12:r.currentPassword="",r.newPassword="",r.confirmPassword="",r.showSuccess("Password updated successfully!"),a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](4),console.error("Error updating password:",a.t0),"auth/requires-recent-login"===a.t0.code?r.errorMessage="This operation requires recent authentication. Please log out and log back in.":r.errorMessage=r.getFirebaseError(a.t0.code)||"Failed to update password. Please try again.";case 22:return a.prev=22,r.updatingPassword=!1,a.finish(22);case 25:case"end":return a.stop()}}),a,null,[[4,18,22,25]])})))()},getFirebaseError:function(r){switch(r){case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/requires-recent-login":return"This operation requires recent authentication. Please log out and log back in.";case"auth/weak-password":return"Password should be at least 6 characters.";default:return"An error occurred. Please try again."}},showSuccess:function(r){var a=this;this.successMessage=r,this.updateSuccess=!0,setTimeout((function(){a.updateSuccess=!1,a.successMessage=""}),3e3)},logout:function(){var r=this,a=(0,Q.xI)();(0,Q.CI)(a).then((function(){r.$router.push("/")}))["catch"]((function(r){alert("Logout failed: "+r.message)}))}}};var J=s(1241);const O=(0,J.A)(B,[["render",R],["__scopeId","data-v-bbc0c7d6"]]),H=O}}]);
//# sourceMappingURL=184.817d1b9f.js.map